<!DOCTYPE html>
<html lang="ru">
<head>
    {% include 'components/meta_tags.html' %}
    <meta name="description" content="–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∑–∞ —Å—á–∏—Ç–∞–Ω–Ω—ã–µ –º–∏–Ω—É—Ç—ã —Å –ø–æ–º–æ—â—å—é –ò–ò. –ó–∞–≥—Ä—É–∂–∞–π—Ç–µ —É—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –∫–≤–∏–∑—ã –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —ç–∫–∑–∞–º–µ–Ω–∞–º.">
    <meta name="keywords" content="—Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤, —Ç–µ—Å—Ç—ã —Å –ò–ò, –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–≤–∏–∑—ã, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —ç–∫–∑–∞–º–µ–Ω–∞–º, —É—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã, –æ–Ω–ª–∞–π–Ω —Ç–µ—Å—Ç—ã">
    <meta name="author" content="–õ–µ—Ç—É—á–∫–∞/Letychka by Kozak Developer">
    <meta property="og:title" content="–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ —Å –ò–ò - –õ–µ—Ç—É—á–∫–∞">
    <meta property="og:description" content="–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ò–ò –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö —É—á–µ–±–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤. –ë—ã—Å—Ç—Ä–æ, —É–¥–æ–±–Ω–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ!">
    <meta name="csrf-token" content="{{ csrf_token }}">
    {% load static %}
    <link rel="shortcut icon" href="{% static 'img/logo.png' %}" type="image/png">
    
    {% include 'components/linker.html' %}
    <link rel="stylesheet" href="{% static 'css/upload-styles.css' %}?v=1.9">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function(m,e,t,r,i,k,a){
            m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
            m[i].l=1*new Date();
            for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
            k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
        })(window, document,'script','https://mc.yandex.ru/metrika/tag.js', 'ym');
        ym(98829160, 'init', {webvisor:true, clickmap:true, accurateTrackBounce:true, trackLinks:true});
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/98829160" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
</head>

<style>
    footer {
        margin-top: 0;
    }
    #overlay {
        display: none;
    }
    @keyframes fadeInOut {
        0% { opacity: 0; transform: translateY(10px); }
        20% { opacity: 1; transform: translateY(0); }
        80% { opacity: 1; transform: translateY(0); }
        100% { opacity: 0; transform: translateY(-10px); }
    }
    #loader-text {
        animation: fadeInOut 2.5s ease-in-out infinite;
    }
</style>

<body class="bg-create">
    <div id="toast" class="copy-notification hidden">
        <span id="toast-message">–°–æ–æ–±—â–µ–Ω–∏–µ</span>
    </div>

    <script src="{% static 'js/second-loader.js' %}"></script>

    {% include 'components/loader.html' %}
    
    <div id="overlay" class="fixed inset-0 bg-black/90 backdrop-blur-sm z-[999] hidden flex-col items-center justify-center p-4">
        <canvas id="matrix-canvas" class="absolute inset-0 z-0 w-full h-full"></canvas>
        <div id="loader-text-container" class="relative z-10 text-center">
            <h2 id="loader-text" class="text-2xl font-bold text-white transition-opacity duration-500">
                <!-- –°—é–¥–∞ JS –±—É–¥–µ—Ç –≤—Å—Ç–∞–≤–ª—è—Ç—å —Ç–µ–∫—Å—Ç -->
            </h2>
            <p class="text-gray-400 mt-2">–°–æ–∑–¥–∞—ë–º –º–∞–≥–∏—é...</p>
        </div>
    </div>
    
    <div id="page-container" class="fade" style="display: none;">
        {% include 'header.html' %}

        <div class="main-content-create">
            {% if total_tests == 0 %}
                <div class="onboarding-welcome">
                    <h1 class="welcome-title">–ü—Ä–µ–≤—Ä–∞—Ç–∏—Ç–µ –∑–Ω–∞–Ω–∏—è –≤ —Ç–µ—Å—Ç—ã. –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ.</h1>
                    <p class="welcome-subtitle">
                        –≠—Ç–æ –õ–µ—Ç—É—á–∫–∞ ‚Äî –í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤. <br>
                        –ü—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –∏–∑ –ª–µ–∫—Ü–∏–∏ –∏–ª–∏ —Å—Ç–∞—Ç—å–∏ –≤ –ø–æ–ª–µ –Ω–∏–∂–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å.
                    </p>
                    <div class="welcome-arrow">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
                <div class="inspiration-container">
                    <div class="inspiration-card" data-inspiration-text="–¢–µ–æ—Ä–µ–º–∞ –ü–∏—Ñ–∞–≥–æ—Ä–∞ –≥–ª–∞—Å–∏—Ç, —á—Ç–æ –≤ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ –∫–≤–∞–¥—Ä–∞—Ç –¥–ª–∏–Ω—ã –≥–∏–ø–æ—Ç–µ–Ω—É–∑—ã —Ä–∞–≤–µ–Ω —Å—É–º–º–µ –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ –¥–ª–∏–Ω –¥–≤—É—Ö –¥—Ä—É–≥–∏—Ö —Å—Ç–æ—Ä–æ–Ω. –≠—Ç–æ –º–æ–∂–Ω–æ –∑–∞–ø–∏—Å–∞—Ç—å –∫–∞–∫: a¬≤ + b¬≤ = c¬≤, –≥–¥–µ c –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –¥–ª–∏–Ω—É –≥–∏–ø–æ—Ç–µ–Ω—É–∑—ã, –∞ a –∏ b ‚Äî –¥–ª–∏–Ω—ã –¥–≤—É—Ö –¥—Ä—É–≥–∏—Ö —Å—Ç–æ—Ä–æ–Ω, –∏–ª–∏ –∫–∞—Ç–µ—Ç–æ–≤.">
                        <h4>üìö –¢–µ—Å—Ç –ø–æ –ø–∞—Ä–∞–≥—Ä–∞—Ñ—É</h4>
                        <span>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–∞–∫ —É—Å–≤–æ–µ–Ω –º–∞—Ç–µ—Ä–∏–∞–ª</span>
                    </div>
                    <div class="inspiration-card" data-inspiration-text="–ö–ª—é—á–µ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è –í—Ç–æ—Ä–æ–π –º–∏—Ä–æ–≤–æ–π –≤–æ–π–Ω—ã: 1. –í—Ç–æ—Ä–∂–µ–Ω–∏–µ –≤ –ü–æ–ª—å—à—É (1939). 2. –ë–∏—Ç–≤–∞ –∑–∞ –ë—Ä–∏—Ç–∞–Ω–∏—é (1940). 3. –ù–∞–ø–∞–¥–µ–Ω–∏–µ –Ω–∞ –ü–µ—Ä–ª-–•–∞—Ä–±–æ—Ä (1941). 4. –°—Ç–∞–ª–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –±–∏—Ç–≤–∞ (1942-1943). 5. –í—ã—Å–∞–¥–∫–∞ –≤ –ù–æ—Ä–º–∞–Ω–¥–∏–∏ (1944). 6. –ö–∞–ø–∏—Ç—É–ª—è—Ü–∏—è –ì–µ—Ä–º–∞–Ω–∏–∏ (1945).">
                        <h4>üìú –í–æ–ø—Ä–æ—Å—ã –ø–æ –¥–∞—Ç–∞–º –∏ —Ñ–∞–∫—Ç–∞–º</h4>
                        <span>–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –∏–ª–∏ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã</span>
                    </div>
                    <div class="inspiration-card" data-inspiration-text="–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã Agile-–º–∞–Ω–∏—Ñ–µ—Å—Ç–∞: 1. –õ—é–¥–∏ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –≤–∞–∂–Ω–µ–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤. 2. –†–∞–±–æ—Ç–∞—é—â–∏–π –ø—Ä–æ–¥—É–∫—Ç –≤–∞–∂–Ω–µ–µ –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏. 3. –°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ —Å –∑–∞–∫–∞–∑—á–∏–∫–æ–º –≤–∞–∂–Ω–µ–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è —É—Å–ª–æ–≤–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞. 4. –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –≤–∞–∂–Ω–µ–µ —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–º—É –ø–ª–∞–Ω—É.">
                        <h4>üí° –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏</h4>
                        <span>–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç –ø–æ –∫–ª—é—á–µ–≤—ã–º –ø–æ–Ω—è—Ç–∏—è–º</span>
                    </div>
                    <div class="inspiration-card" data-inspiration-text="">
                        <h4>‚úçÔ∏è –ù–∞—á–∞—Ç—å —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞</h4>
                        <span>–î–ª—è –≤–∞—à–∏—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–¥–µ–π</span>
                    </div>
                </div>
            {% else %}
                <div class="welcome-return">
                    <h1 class="welcome-title">–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º!</h1>
                    <p>–ì–æ—Ç–æ–≤—ã —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–µ—Å—Ç?</p>
                </div>
            {% endif %}
        </div>

        {% if subscription_status != 'active' %}
            <div class="container notice-banner deactivated">
                <div class="icon-wrapper">
                    <i class="fas fa-bolt"></i>
                </div>
                <div class="text-wrapper">
                    <h3>–ü—Ä–µ–º–∏—É–º –æ—Ç–∫–ª—é—á–µ–Ω</h3>
                    <p>
                        –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É, —á—Ç–æ–±—ã —Å–Ω–æ–≤–∞ <strong>–ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å –í–∞—à–∏ —É—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏&nbsp;–¥–æ–∫—É–º–µ–Ω—Ç—ã –≤&nbsp;—Ç–µ—Å—Ç—ã –∑–∞&nbsp;—Å—á–∏—Ç–∞–Ω–Ω—ã–µ —Å–µ–∫—É–Ω–¥—ã</strong>, –ø–æ–ª—É—á–∞—Ç—å —Ñ–∏–¥–±—ç–∫ –æ—Ç&nbsp;–ò–ò, –∞&nbsp;—Ç–∞–∫–∂–µ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ–≥–ª—è–¥–∫–∏ –Ω–∞&nbsp;–ª–∏–º–∏—Ç—ã.
                    </p>
                </div>
                <a class="button-medium button-accent" href="{% url 'payment' %}">
                    <div><i class="fas fa-rocket"></i> <p>–û—Ñ–æ—Ä–º–∏—Ç—å –ü—Ä–µ–º–∏—É–º</p></div>
                </a>
            </div>
        {% else %}
            {% if tests_today == 0 %}
                <div class="container notice-banner deactivated">
                    <div class="icon-wrapper">
                        <i class="fas fa-battery-empty"></i>
                    </div>
                    <div class="text-wrapper">
                        <h3>–í—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</h3>
                        <p>
                            –°–Ω–∏–º–∏—Ç–µ –≤—Å–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å —Ç–∞—Ä–∏—Ñ–æ–º <strong>–ü—Ä–µ–º–∏—É–º</strong>: –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ —Ñ–∞–π–ª—ã,
                            –ø–æ–ª—É—á–∞–π—Ç–µ –≥–ª—É–±–æ–∫—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Ç–µ—Å—Ç—ã –±–µ–∑ –æ–≥–ª—è–¥–∫–∏ –Ω–∞ –ª–∏–º–∏—Ç—ã.
                        </p>
                    </div>
                    <a class="button-medium button-accent" href="{% url 'payment' %}">
                        <div><i class="fas fa-unlock-alt"></i> <p>–°–Ω—è—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è</p></div>
                    </a>
                </div>
            {% endif %}
            {% if subscription_level < 1 %}
                <div class="container locked-upload-integrated">
                    <div class="icon-wrapper">
                        <img src="{% static 'img/icon-diamond.png' %}" alt="–ì–µ–Ω–µ—Ä–∞—Ü–∏—è" class="feature-icon">
                    </div>
                    <div class="text-wrapper">
                        <h3>–û—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è —Å—Ç–∞—Ä—Ç–∞</h3>
                        <p>
                            –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤—ã–±–∏—Ä–∞—é—Ç <strong>–∫–≤–∞—Ä—Ç–∞–ª—å–Ω—ã–π –∞–±–æ–Ω–µ–º–µ–Ω—Ç</strong>. <br><br>
                            –≠—Ç–æ –≤—ã–≥–æ–¥–Ω–µ–µ, —á–µ–º –ø–ª–∞—Ç–∏—Ç—å –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü. <a href="/available-plans/" rel="noopener noreferrer">–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ</a>, —á—Ç–æ –í—ã –ø–æ–ª—É—á–∏—Ç–µ.
                        </p>
                    </div>
                    <a class="button-medium button-accent" href="{% url 'payment' %}">
                        <div><i class="fas fa-rocket"></i> <p>–í—ã–±—Ä–∞—Ç—å –ø–ª–∞–Ω</p></div>
                    </a>
                </div>
            {% endif %}
        {% endif %}

        <div class="container" id="file-preview-container" style="display: none;">
            <div id="attached-file-name">
                ‚úÖ –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω —Ñ–∞–π–ª: <strong></strong>
            </div>
            <div class="file-preview">
                <div class="file-icon">
                    <img src="{% static 'img/icon-file3d.png' %}" alt="File Icon">
                </div>
                <div class="file-info">
                    <div class="file-name"><strong id="preview-file-name"></strong></div>
                    <div class="file-size"><strong id="preview-file-size"></strong></div>
                    <div class="button-medium" id="remove-file-button" style="display: none;" onclick="removeUploadedFile()">
                        <div>
                            <img src="{% static 'img/icon-delete.png' %}" alt="–£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª">
                            <p>–û—Ç–∫—Ä–µ–ø–∏—Ç—å</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {% if dashboard_context.type == 'popular_test' %}
        <div class="container p-6 max-w-auto bg-[var(--color-surface)] rounded-3xl border border-[var(--color-border)]">
            <div class="flex justify-between flex-wrap items-start">
                <div>
                    <p class="text-xs text-gray-400 uppercase tracking-wider">–ü–æ–ø—É–ª—è—Ä–Ω—ã–π –∑–∞ 30 –¥–Ω–µ–π</p>
                    <h2 class="text-base font-bold text-white mt-1 truncate">
                        {{ dashboard_context.test_title }}
                    </h2>
                </div>
                <a href="{% url 'preview_test_result' dashboard_context.survey_id %}" 
                class="group flex-shrink-0 flex items-center gap-2 px-3 py-1.5 bg-black/20 rounded-full
                        hover:bg-[var(--color-accent-primary)] transition-colors">
                    <span class="text-xs font-semibold text-white">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span>
                    <i class="fas fa-arrow-right text-gray-400 transition-transform group-hover:translate-x-1 group-hover:text-white"></i>
                </a>
            </div>
            <!-- –°–µ—Ç–∫–∞ —Å KPI -->
            <div class="mt-4 grid grid-cols-1 md:grid-cols-4 gap-4 text-center">
                <!-- –ü—Ä–æ—Å–º–æ—Ç—Ä—ã -->
                <div class="bg-black/20 p-3 rounded-xl">
                    <p class="text-2xl font-bold text-white">{{ dashboard_context.total_views }}</p>
                    <p class="text-xs text-gray-500">–ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</p>
                </div>
                <!-- –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è -->
                <div class="bg-black/20 p-3 rounded-xl">
                    <p class="text-2xl font-bold text-white">{{ dashboard_context.total_attempts }}</p>
                    <p class="text-xs text-gray-500">–ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π</p>
                </div>
                <!-- –°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª -->
                <div class="bg-black/20 p-3 rounded-xl">
                    <p class="text-2xl font-bold text-white">{{ dashboard_context.avg_score_percent }}<span class="text-lg">%</span></p>
                    <p class="text-xs text-gray-500">–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª</p>
                </div>
                <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–π —É—á–∞—Å—Ç–Ω–∏–∫ -->
                <div class="bg-black/20 p-3 rounded-xl">
                    {% if dashboard_context.last_participant.name %}
                        <p class="text-lg font-bold text-white truncate">{{ dashboard_context.last_participant.name }}</p>
                        <p class="text-xs text-gray-500">
                            {{ dashboard_context.last_participant.time|timesince }} –Ω–∞–∑–∞–¥
                        </p>
                    {% else %}
                        <p class="text-lg font-bold text-gray-600">-</p>
                        <p class="text-xs text-gray-500">–ü–æ—Å–ª–µ–¥–Ω–∏–π —É—á–∞—Å—Ç–Ω–∏–∫</p>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %}

        <section class="container" id="recent-history-container">
            <h3><i class="fas fa-history"></i> –ù–µ–¥–∞–≤–Ω–∏–µ —Ç–µ—Å—Ç—ã</h3>
            <div id="history-content">
                <!-- –°—é–¥–∞ JavaScript –≤—Å—Ç–∞–≤–∏—Ç –ø—Ä–µ–ª–æ–∞–¥–µ—Ä, —Å–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–æ–≤ –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—É—Å—Ç–æ—Ç–µ -->
            </div>
        </section>

        <style>
            .features-container {
                margin-top: 20px;
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 24px;
            }
            .feature-block {
                position: relative;
                overflow: hidden;
                background: rgba(93, 86, 110, 0.12);
                border-radius: 18px;
                padding: 24px;
                text-align: center;
                transition: all 0.25s ease;
                text-decoration: none;
            }
            .feature-block:hover {
                transform: translateY(-4px);
                background: rgba(93, 86, 110, 0.2);
            }
            .feature-icon {
                width: 48px;
                height: 48px;
                margin: 0 auto 16px;
            }
            .feature-block h3 {
                font-size: 16px;
                font-weight: 600;
                margin-bottom: 8px;
                color: #ffffff;
            }
            .feature-block p {
                font-size: 13px;
                color: #c0c0c0;
                line-height: 1.6;
                margin: 0;
            }

            .feature-badge {
                position: absolute;
                top: 12px;
                right: -40px;
                background-color: var(--color-accent-secondary);
                color: white;
                padding: 4px 40px;
                font-size: 10px;
                font-weight: 700;
                text-transform: uppercase;
                transform: rotate(45deg);
                box-shadow: 0 0 10px rgba(0,0,0,0.5);
            }
            .feature-block.premium-feature {
                opacity: 0.7;
            }
            .feature-block.premium-feature:hover {
                opacity: 1;
            }

            .feature-block.quick-link h3 {
                color: var(--secondary-color);
            }
            .feature-block.quick-link .accent {
                color: var(--primary-color);
            }
        </style>

        <div class="container features-container">

        <section class="py-0">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <!-- –ë–ª–æ–∫ 1: –ö–æ–Ω–≤–µ–π–µ—Ä —Ç–µ—Å—Ç–æ–≤ -->
                <a href="/media/ot-dokumenta-do-testa/" class="group block p-4 rounded-3xl bg-gradient-to-br from-[rgba(30,24,48,0.5)] to-transparent border border-[var(--color-border)] 
                                transition-all duration-300 hover:border-[var(--color-accent-primary)] hover:-translate-y-2 active:scale-[0.97]">
                    <div class="flex items-center justify-center h-14 w-14 rounded-2xl bg-black/30 mb-5 border border-[var(--color-border)]
                                transition-all duration-300 group-hover:bg-[var(--color-accent-primary)]/20 group-hover:border-[var(--color-accent-primary)]/50 group-hover:scale-110">
                        <i class="fas fa-layer-group text-2xl text-[var(--color-accent-primary)] transition-colors duration-300 group-hover:text-white"></i>
                    </div>
                    <h3 class="font-bold text-white text-xl">–í–∞—à–∏ —Å—Ç–∞—Ä—ã–µ –ª–µ–∫—Ü–∏–∏&nbsp;&mdash; –≤–∞—à –Ω–æ–≤—ã–π –∞–∫—Ç–∏–≤</h3>
                    <p class="mt-2 text-sm text-gray-400">
                        –£—Å—Ç–∞–ª–∏ –ø—Ä–∏–¥—É–º—ã–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã? –ü—Ä–µ–∫—Ä–∞—Ç–∏—Ç–µ. –í—Å—è –≤–∞—à–∞ –±–∞–∑–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤&nbsp;&mdash; PDF, Word, —Å—Ç–∞—Ç—å–∏&nbsp;&mdash; —ç—Ç–æ –≥–æ—Ç–æ–≤–æ–µ —Ç–æ–ø–ª–∏–≤–æ. –õ–µ—Ç—É—á–∫–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –ª—é–±–æ–π –¥–æ–∫—É–º–µ–Ω—Ç –≤&nbsp;—É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç.
                    </p>
                    <div class="mt-4 text-sm font-semibold text-[var(--color-accent-primary)] opacity-0 group-hover:opacity-100 transition-opacity">
                        –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–∞ &rarr;
                    </div>
                </a>

                <a href="/media/kak-chitat-dashbordy/" class="group block p-4 rounded-3xl bg-gradient-to-br from-[rgba(30,24,48,0.5)] to-transparent border border-[var(--color-border)] 
                                transition-all duration-300 hover:border-[var(--color-accent-primary)] hover:-translate-y-2 active:scale-[0.97]">
                    <div class="flex items-center justify-center h-14 w-14 rounded-2xl bg-black/30 mb-5 border border-[var(--color-border)]
                                transition-all duration-300 group-hover:bg-[var(--color-accent-primary)]/20 group-hover:border-[var(--color-accent-primary)]/50 group-hover:scale-110">
                        <i class="fas fa-crosshairs text-2xl text-[var(--color-accent-primary)] transition-colors duration-300 group-hover:text-white"></i>
                    </div>
                    <h3 class="font-bold text-white text-xl">–û—Ç&nbsp;–±–∞–ª–ª–æ–≤&nbsp;&mdash; –∫&nbsp;–ø–æ–Ω–∏–º–∞–Ω–∏—é</h3>
                    <p class="mt-2 text-sm text-gray-400">
                        –ü–µ—Ä–µ—Å—Ç–∞–Ω—å—Ç–µ –ø—Ä–æ—Å—Ç–æ —Å—Ç–∞–≤–∏—Ç—å "5" –∏–ª–∏ "3". –ù–∞—à–∏ –¥–∞—à–±–æ—Ä–¥—ã –ø–æ–∫–∞–∂—É—Ç –∫–∞—Ä—Ç—É –æ—à–∏–±–æ–∫ –≤—Å–µ–π –≥—Ä—É–ø–ø—ã, –≤—ã—è–≤—è—Ç –ª–∏–¥–µ—Ä–æ–≤ –∏ –æ—Ç—Å—Ç–∞—é—â–∏—Ö –∏ –ø–æ–¥—Å–≤–µ—Ç—è—Ç —Ç–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ "–∑–∞–ø–∞–¥–∞—é—Ç".
                    </p>
                    <div class="mt-4 text-sm font-semibold text-[var(--color-accent-primary)] opacity-0 group-hover:opacity-100 transition-opacity">
                        –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–∏–º–µ—Ä –æ—Ç—á–µ—Ç–∞ &rarr;
                    </div>
                </a>

                <a href="/media/vse-sposoby-podelitsya/" class="group block p-4 rounded-3xl bg-gradient-to-br from-[rgba(30,24,48,0.5)] to-transparent border border-[var(--color-border)] 
                                transition-all duration-300 hover:border-[var(--color-accent-primary)] hover:-translate-y-2 active:scale-[0.97]">
                    <div class="flex items-center justify-center h-14 w-14 rounded-2xl bg-black/30 mb-5 border border-[var(--color-border)]
                                transition-all duration-300 group-hover:bg-[var(--color-accent-primary)]/20 group-hover:border-[var(--color-accent-primary)]/50 group-hover:scale-110">
                        <i class="fas fa-network-wired text-2xl text-[var(--color-accent-primary)] transition-colors duration-300 group-hover:text-white"></i>
                    </div>
                    <h3 class="font-bold text-white text-xl">–î–ª—è –∞—É–¥–∏—Ç–æ—Ä–∏–∏, –æ–Ω–ª–∞–π–Ω–∞ –∏&nbsp;–æ—Ñ—Ñ–ª–∞–π–Ω–∞</h3>
                    <p class="mt-2 text-sm text-gray-400">
                        –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ø—Ä–æ—Å—Ç—É—é —Å—Å—ã–ª–∫—É –¥–ª—è –æ–Ω–ª–∞–π–Ω-—Ç–µ—Å—Ç–∞. –ü–æ–∫–∞–∂–∏—Ç–µ QR-–∫–æ–¥ –Ω–∞&nbsp;–ø—Ä–æ–µ–∫—Ç–æ—Ä–µ. –ò–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π PDF –¥–ª—è –ø–µ—á–∞—Ç–∏ –∏&nbsp;—Ä–∞–∑–¥–∞—á–∏.
                    </p>
                    <div class="mt-4 text-sm font-semibold text-[var(--color-accent-primary)] opacity-0 group-hover:opacity-100 transition-opacity">
                        –ò–∑—É—á–∏—Ç—å –≤—Å–µ —Å–ø–æ—Å–æ–±—ã &rarr;
                    </div>
                </a>
                
            </div>
        </section>

    </div>

        <div class="max-w-4xl mx-auto mt-6">
            <div class="mt-8 bg-black/20 p-6 rounded-3xl border border-dashed border-cyan-500/30 text-center">
                <h3 class="font-bold text-white text-lg">
                    –ù–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞? <span class="text-cyan-300">–ù–∞–¥–∏–∫—Ç—É–π—Ç–µ.</span>
                </h3>
                <p class="mt-2 text-sm text-gray-400 max-w-lg mx-auto">
                    –ï—Å–ª–∏ —É&nbsp;–≤–∞—Å –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –∞—É–¥–∏–æ-–ª–µ–∫—Ü–∏—è –∏–ª–∏ –≤–∏–¥–µ–æ, <a href="https://golosok.space/?utm_referrer=letychka.ru" target="_blank" class="font-semibold text-cyan-300 hover:underline">–ì–æ–ª–æ—Å–æ–∫</a> –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç –∏—Ö&nbsp;–≤&nbsp;—Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã&nbsp;—Å—Ä–∞–∑—É —Å–º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–∞ –≤&nbsp;–õ–µ—Ç—É—á–∫–µ.
                </p>
            </div>
        </div>
        
        <div class="container" id="block-generate">
            <form id="text-form" method="post" onsubmit="event.preventDefault(); submitText();">
                {% csrf_token %}
                <div class="input-area">
                    <textarea id="user-text" 
                            rows="4" 
                            placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–¥–µ—Å—å —Ç–µ–º—É, —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ –∏–ª–∏ —Ç–µ–∫—Å—Ç –∏–∑ –º–µ—Ç–æ–¥–∏—á–∫–∏..."
                            class="w-full rounded-2xl p-4 pr-28 resize-none 
                                    transition-all duration-300 ease-in-out 
                                    h-24 max-h-96 custom-scrollbar"></textarea>
                    
                    <div class="input-buttons-wrapper">
                        {% if subscription_level > 1 and subscription_level < 50 %}
                            <button type="button" class="attach-button" title="–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª" onclick="document.getElementById('hidden-file-input').click();">
                                <i class="fas fa-paperclip"></i>
                            </button>
                        {% else %}
                            <a id="premium-upload-trigger" class="attach-button" title="–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª">
                                <i class="fas fa-paperclip"></i>
                            </a>
                        {% endif %}
                        <button type="button" class="send-button" title="–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç" onclick="submitText()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>

                <div class="controls-toolbar">
                    <div class="slider-container">
                        <p id="question-slider-text"><span id="slider-value">5</span> –≤–æ–ø—Ä–æ—Å–æ–≤</p>
                        {% if subscription_level > 0 and subscription_level < 50 %}
                        <input type="range" id="question-slider" class="custom-slider" min="1" max="20" value="5" style="display: none;">
                        {% else %}
                        <input type="range" id="question-slider" class="custom-slider" min="1" max="7" value="5" style="display: none;">
                        {% endif %}
                    </div>
                    <div id="char-count">0 / 16384</div>
                </div>
                <div class="toolbar-actions">
                    <a class="button-medium" href="{% url 'history' %}" title="–ò—Å—Ç–æ—Ä–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–π">
                        <div><i class="fas fa-history"></i><p>–ò—Å—Ç–æ—Ä–∏—è</p></div>
                    </a>
                    <a class="button-medium" href="{% url 'payment' %}" title="–í–∞—à–∏ –ª–∏–º–∏—Ç—ã">
                        <div><i class="fas fa-star"></i><p><span>{{ tests_today }}</span></p></div>
                    </a>
                </div>
                
                {% if subscription_level > 1 and subscription_level < 50 %}
                    <input type="file" id="hidden-file-input" accept=".pdf, .doc, .docx, .txt" style="display: none;" onchange="handleFiles(this.files)">
                {% endif %}
            </form>
        </div>

        <script>
            document.querySelectorAll('.faq-question').forEach(item => {
                item.addEventListener('click', () => {
                    const answer = item.nextElementSibling;
            
                    if (answer.style.display === "block") {
                        answer.style.display = "none";
                    } else {
                        answer.style.display = "block";
                    }
                });
            });
        </script>        
    </div>
    {% include 'footer-s.html' %}

    <div id="limit-exceeded-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-icon">
                <i class="fas fa-battery-empty"></i>
            </div>
            <h3>–õ–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω</h3>
            <p id="limit-modal-text">
                –í—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–∞ —Ç–∞—Ä–∏—Ñ–µ ¬´–°—Ç–∞—Ä—Ç–æ–≤—ã–π¬ª.
                –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –ü—Ä–µ–º–∏—É–º, —á—Ç–æ–±—ã —Å–Ω—è—Ç—å –≤—Å–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è.
            </p>
            <div class="modal-actions">
                <button id="close-limit-modal-btn" class="button-medium">–ü–æ–∑–∂–µ</button>
                <a href="{% url 'payment' %}" class="button-medium button-accent">
                    <div>
                        <i class="fas fa-rocket"></i>
                        <p>–°–Ω—è—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è</p>
                    </div>
                </a>
            </div>
        </div>
    </div>

    <script src="{% static 'js/main.js' %}?v=1.5"></script>
    <script src="{% static 'js/auto-scroll.js' %}"></script>

    <!-- –ú–æ–¥–∞–ª–∫–∞ Premium -->
    <div id="premium-upload-modal" class="action-modal">
        <div class="action-modal__content">
            <div class="action-modal__header">
                <div class="action-modal__icon">
                    <i class="fas fa-gem"></i>
                </div>
                <h3>–î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ü—Ä–µ–º–∏—É–º</h3>
            </div>
            <div class="action-modal__body">
                <p>–†–∞—Å—à–∏—Ä—å—Ç–µ —Å–≤–æ–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏ –Ω–∞—á–Ω–∏—Ç–µ —Ä–∞–±–æ—Ç–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ. <br><br>–î–æ 69% –≤—ã–≥–æ–¥—ã –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ –∑–∞ 3 –º–µ—Å—è—Ü–∞!</p>
            </div>
            <div class="action-modal__footer">
                <div id="action-modal-cancel" class="button-medium"><div><p>–ü–æ–∑–∂–µ</p></div></div>
                <div id="action-modal-confirm" class="button-medium button-accent"><div><p>–ö—É–ø–∏—Ç—å</p></div></div>
            </div>
        </div>
    </div>

    <script>
        function setupActionModal(modalId, triggerId, confirmId, cancelId, confirmUrl) {
            const modal = document.getElementById(modalId);
            const triggerButton = document.getElementById(triggerId);
            const confirmButton = document.getElementById(confirmId);
            const cancelButton = document.getElementById(cancelId);

            if (!modal || !triggerButton || !confirmButton || !cancelButton) {
                console.error('Modal setup failed: one or more elements not found.');
                return;
            }

            const showModal = () => modal.classList.add('is-visible');
            const hideModal = () => modal.classList.remove('is-visible');

            triggerButton.addEventListener('click', showModal);
            cancelButton.addEventListener('click', hideModal);

            modal.addEventListener('click', (event) => {
                if (event.target === modal) {
                    hideModal();
                }
            });

            confirmButton.addEventListener('click', () => {
                window.location.href = confirmUrl;
            });
        }

        setupActionModal(
            'premium-upload-modal', 
            'premium-upload-trigger',
            'action-modal-confirm',
            'action-modal-cancel',
            "{% url 'payment' %}"
        );
    </script>

    <script>
    // –§–∏–∫—Å –¥–ª—è iOS - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
    document.addEventListener('DOMContentLoaded', function() {
        const textarea = document.getElementById('user-text');
        
        textarea.addEventListener('focus', function() {
            document.querySelector('meta[name="viewport"]').content = 
                'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no';
        });
        
        textarea.addEventListener('blur', function() {
            document.querySelector('meta[name="viewport"]').content = 
                'width=device-width, initial-scale=1.0';
        });
        
        textarea.addEventListener('input', function() {
            document.getElementById('char-count').textContent = 
                this.value.length + '/ 16384';
        });
        
        const slider = document.getElementById('question-slider');
        slider.addEventListener('input', function() {
            document.getElementById('question-count').textContent = 
                this.value + (this.value == 1 ? ' –≤–æ–ø—Ä–æ—Å' : ' –≤–æ–ø—Ä–æ—Å–æ–≤');
        });
    });
    </script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const inspirationCards = document.querySelectorAll('.inspiration-card');
            const userText = document.getElementById('user-text');
            const textForm = document.getElementById('text-form');

            if (userText) {
                userText.addEventListener('input', function() {
                    this.style.height = 'auto';
                    this.style.height = `${this.scrollHeight}px`;
                });
            }

            inspirationCards.forEach(card => {
                card.addEventListener('click', () => {
                    const inspirationText = card.dataset.inspirationText;
                    
                    userText.value = inspirationText;
                    
                    userText.dispatchEvent(new Event('input', { bubbles: true }));
                    
                    setTimeout(() => {
                        userText.focus();
                    }, 500);
                });
            });
        });
    </script>
    <script>
        window.addEventListener('pageshow', function(event) {
            // `event.persisted` - —ç—Ç–æ —Ñ–ª–∞–≥, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–≤–µ–Ω `true`
            // —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±—ã–ª–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏–∑ bfcache.
            if (event.persisted) {
                console.log('Page was loaded from bfcache. Forcing reload...');
                window.location.reload();
            }
        });
    </script>
</body>
</html>
