<!DOCTYPE html>
<html lang="ru" class="scroll-smooth">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Создать тест по тексту и документу | Онлайн бесплатно с результатами | Летучка</title>
    <meta name="description" content="Генератор тестов по тексту и файлам онлайн. Создайте тест с автопроверкой и PDF за 30 секунд бесплатно. Без регистрации!">
    <meta name="keywords" content="создать тест, создать тест по тексту онлайн, создать тест онлайн с результатами бесплатно, составление тестов онлайн для студентов, создать тест онлайн бесплатно, составить тест по тексту онлайн, создать тест онлайн, создать свой тест">
    <meta name="csrf-token" content="{{ csrf_token }}">
    
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://letychka.ru">
    <meta property="og:title" content="Создать тест по тексту и файлам. Создайте тест с ответами, автопроверкой и экспортом в PDF. Без регистрации. | Летучка">
    <meta property="og:description" content="Генератор тестов по тексту и файлам онлайн. Создайте тест с автопроверкой и PDF за 30 секунд бесплатно. Без регистрации!">
    <meta property="og:image" content="https://letychka.ru/static/letychka-banner-1703.webp">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="Летучка – создание тестов с помощью ИИ">
    <meta name="theme-color" content="#0F0818">
    <link rel="canonical" href="https://letychka.ru" />
    
    <meta name="twitter:card" content="https://letychka.ru/static/letychka-banner-1703.webp"/>
    <meta name="twitter:image" content="https://letychka.ru/static/letychka-banner-1703.webp"/>

    <link rel="canonical" href="https://letychka.ru" />
    <link rel="icon" href="{% static 'img/favicon.ico' %}" type="image/ico">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'img/apple-touch-icon.png' %}">
    <!-- <link rel="stylesheet" href="{% static 'css/start.css' %}?v=3.25"> -->
    
    {% if debug %}
        <script src="https://cdn.tailwindcss.com"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    {% else %}
        <script src="{% static 'vendor/tailwind.full.min.js' %}"></script>
        <script src="{% static 'vendor/jquery.min.js' %}"></script>
    {% endif %}

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
        setTimeout(function() {
            (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
            m[i].l=1*new Date();
            for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
            k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
            (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
        
            ym(98823704, "init", {
                clickmap:true,
                trackLinks:true,
                accurateTrackBounce:true,
                webvisor:true
            });
        }, 1000);
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/98823704" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->

    <style>
        :root {
            --color-bg: #0F0818;
            --color-surface: rgba(30, 24, 48, 0.5);
            --color-border: rgba(97, 109, 240, 0.2);
            --color-text-primary: #f0f0f0;
            --color-text-secondary: #a0a0b0;
            --color-accent-primary: #616DF0;
            --color-accent-secondary: #79EF66;
            --color-text-on-accent: #ffffff;
        }

       @font-face {
            font-family: 'Unbounded Medium';
            src: url("{% static 'fonts/Unbounded-Medium.ttf' %}") format('truetype');
        }

        body { background-color: var(--color-bg); color: var(--color-text-primary); font-family: 'Inter', sans-serif; }

        h1, h2, h3 {
            font-family: 'Unbounded Medium';
        }

        .highlight { color: var(--color-accent-secondary); }
        .gradient-text {
            background: linear-gradient(45deg, var(--color-accent-primary), var(--color-accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        input[type="range"] { -webkit-appearance: none; appearance: none; background: transparent; cursor: pointer; }
        input[type="range"]::-webkit-slider-runnable-track { background: var(--color-bg); border: 1px solid var(--color-border); border-radius: 9999px; height: 0.5rem; }
        input[type="range"]::-moz-range-track { background: var(--color-bg); border: 1px solid var(--color-border); border-radius: 9999px; height: 0.5rem; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; margin-top: -6px; background-color: var(--color-accent-secondary); border: 2px solid var(--color-bg); height: 1.25rem; width: 1.25rem; border-radius: 9999px; transition: transform .2s ease; }
        input[type="range"]::-moz-range-thumb { background-color: var(--color-accent-secondary); border: 2px solid var(--color-bg); height: 1.25rem; width: 1.25rem; border-radius: 9999px; transition: transform .2s ease; }
        
        #glass-alert {
            position: fixed;
            z-index: 100;
            
            top: 16px;
            left: 16px;
            right: 16px;
            width: auto;
            transform: translateY(-200%);
            
            background: rgba(30, 24, 48, 0.9);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            color: white;
            padding: 1rem 1.5rem;
            border: 1px solid var(--color-border);
            border-radius: 1.5rem;
            
            transition: transform 0.4s ease-in-out, opacity 0.4s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            opacity: 0;
            pointer-events: none;
        }

        #glass-alert.visible {
            transform: translateY(0);
            opacity: 1;
            pointer-events: auto;
        }

        @media screen and (min-width: 720px) {
            #glass-alert {
                top: auto;
                right: auto; 
                top: 4rem;
                left: 50%;
                width: max-content;
                max-width: 90%;
                transform: translateX(-50%) translateY(200%);
                border-radius: 9999px;
            }

            #glass-alert.visible {
                transform: translateX(-50%) translateY(0);
            }
        }

        .glass-alert__close { 
            background: none; 
            border: none; 
            color: var(--color-text-secondary); 
            font-size: 1.5rem; 
            cursor: pointer; 
            line-height: 1; 
        }

        #main-header {
            transition: padding 0.3s ease-in-out, background-color 0.3s ease, box-shadow 0.3s ease, top 0.3s ease-in-out;
            max-width: max-content;
            border-radius: 9999px;
            margin: 0 auto;
            top: 32px;
            padding: 0.5rem;
        }
        
        #main-header.scrolled {
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
            background-color: rgba(20, 18, 23, 0.75);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow: 0 8px 32px rgba(62, 30, 112, 0.3);
            top: 12px;
            z-index: 50;
        }
        
        /* Плавность для внутренних элементов */
        #main-header .logo-img, #main-header .nav-link, #main-header .cta-btn, #main-header .main-nav {
            transition: all 0.3s ease-in-out;
        }
        #main-header .main-nav {
            padding: 0 64px;
        }
        #main-header.scrolled .main-nav {
            padding: 0 32px;
        }

        /* СТИЛИ ДЛЯ МОБИЛЬНОГО МЕНЮ */
        #mobile-menu {
            max-width: 100%;
            position: absolute;
            top: calc(100% + 0.5rem);
            right: 0;
            opacity: 0;
            transform-origin: top right;
            transform: scale(0.95);
            pointer-events: none;
            transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
        }

        #mobile-menu.menu-open {
            opacity: 1;
            transform: scale(1);
            pointer-events: auto;
        }

        @media screen and (width <= 600px) {
            #main-header {
                max-width: 100%;
            }
        }

        /* Стили для рабочего переключателя */
        #pricing-toggle:checked + .toggler {
            background-color: var(--color-accent-primary);
        }
        #pricing-toggle:checked + .toggler .dot {
            transform: translateX(100%);
            background-color: white;
        }
        /* Градиент и свечение для премиум-карты */
        .premium-card {
            background: linear-gradient(145deg, var(--color-surface), #2c204c);
            position: relative;
            overflow: hidden;
        }
        .premium-card::before {
            content: '';
            position: absolute;
            top: 0; right: 0; bottom: 0; left: 0;
            background: radial-gradient(circle at 30% 107%, rgba(97, 109, 240, 0.4), transparent 40%);
            z-index: 1;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        .premium-card:hover::before {
            opacity: 1;
        }
        .premium-card-content {
            position: relative;
            z-index: 2;
        }
        
        details[open] summary .icon-plus { display: none; }
        details:not([open]) summary .icon-minus { display: none; }

        #animated-headline-text {
            -webkit-text-fill-color: transparent;
            transition: background 0.5s ease-in-out;
        }
        @keyframes blink { 50% { opacity: 0; } }
        #animated-headline-cursor {
            animation: blink 1.2s step-end infinite;
        }

        .toggle-input:checked + label .toggler { 
            background-color: var(--color-accent-primary); 
        }
        .toggle-input:checked + label .toggler .dot { 
            transform: translateX(100%); 
            background-color: white; 
        }
        .toggle-input + label {
            display: inline-block;
        }
    </style>
</head>
<body class="min-h-screen">
    
    <header id="main-header" class="sticky z-50">
        <div class="relative max-w-6xl mx-auto px-4 sm:px-8">
            <div class="flex justify-between items-center">
                
                <a href="/" class="flex-shrink-0">
                    <img src="{% static 'img/logo-header.webp' %}" alt="Летучка Логотип" class="logo-img w-32 md:w-32 h-auto">
                </a>

                <nav class="main-nav hidden lg:flex items-center gap-6">
                    <a href="#transformation-engine" class="nav-link text-sm text-[var(--color-text-secondary)] font-semibold hover:text-white">Начать</a>
                    <a href="#use-cases" class="nav-link text-sm text-[var(--color-text-secondary)] font-semibold hover:text-white">Кейсы</a>
                    <a href="#analytics-showcase" class="nav-link text-sm text-[var(--color-text-secondary)] font-semibold hover:text-white">Аналитика</a>
                    <a href="#faq" class="nav-link text-sm text-[var(--color-text-secondary)] font-semibold hover:text-white">FAQ</a>
                </nav>

                <div class="hidden lg:flex items-center space-x-3">
                    <a href="/login" class="cta-btn px-5 py-2 text-sm font-semibold rounded-full hover:bg-[var(--color-surface)] transition-colors">Вход</a>
                    <a href="/register" class="cta-btn bg-[var(--color-accent-primary)] text-[var(--color-text-on-accent)] px-5 py-2.5 text-sm font-bold rounded-full transition-transform hover:scale-105">Начать бесплатно</a>
                </div>

                <div class="lg:hidden">
                    <button id="burger-btn" class="text-white text-2xl w-10 h-10 flex items-center justify-center">
                        <i id="burger-icon" class="fas fa-bars transition-transform duration-300"></i>
                    </button>
                </div>
            </div>
            
            <div id="mobile-menu" class="w-64 rounded-2xl border border-[var(--color-border)] bg-[var(--color-surface)]/80 backdrop-blur-xl shadow-2xl shadow-black/50">
                <nav class="flex flex-col p-4 space-y-2">
                    <a href="#transformation-engine" class="px-4 py-3 text-base text-white font-semibold rounded-lg hover:bg-black/20">Начать</a>
                    <a href="#use-cases" class="px-4 py-3 text-base text-white font-semibold rounded-lg hover:bg-black/20">Кейсы</a>
                    <a href="#analytics-showcase" class="px-4 py-3 text-base text-white font-semibold rounded-lg hover:bg-black/20">Аналитика</a>
                    <a href="#faq" class="px-4 py-3 text-base text-white font-semibold rounded-lg hover:bg-black/20">FAQ</a>
                    <hr class="border-t border-[var(--color-border)] !my-3">
                    <a href="/login" class="px-4 py-3 text-base text-white font-semibold rounded-lg hover:bg-black/20">Вход</a>
                    <a href="/register" class="block text-center bg-[var(--color-accent-primary)] text-white px-5 py-3 text-base font-bold rounded-3xl mt-2">Начать бесплатно</a>
                </nav>
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto p-4 sm:px-8 space-y-24 sm:space-y-32">
        <section id="hero" class="text-center pt-20">
            <h1 class="text-3xl md:text-6xl font-black leading-tight tracking-tighter text-[#F0E5F0]">
                <span class="gradient-text">Создайте тест по&nbsp;тексту</span><br> онлайн с&nbsp;результатами
            </h1>
            <p class="mt-6 text-lg max-w-3xl mx-auto text-[var(--color-text-secondary)]">
                Хватит тратить часы на создание тестов&nbsp;вручную. Загрузите свои материалы и&nbsp;получите готовый тест с&nbsp;ответами. Прямо сейчас. Бесплатно.
            </p>
            <a href="#create-now" class="mt-8 inline-block bg-[var(--color-accent-primary)] text-[var(--color-text-on-accent)] px-10 py-4 text-base font-bold rounded-full transition hover:opacity-90 hover:scale-105 active:scale-100 shadow-lg shadow-[var(--color-accent-primary)]/20">
                Создать тест бесплатно
            </a>
            <a href="#professional-manifesto" class="mt-4 block text-sm text-[var(--color-text-secondary)] transition-scale hover:text-white hover:scale-102 active:scale-95 transition-colors">
                Для профессионального использования <span class="opacity-70">&rarr;</span>
            </a>
        </section>

        <section id="create-now">

            <div class="mt-8 bg-[var(--color-surface)] p-4 sm:p-8 rounded-3xl border border-[var(--color-border)] shadow-2xl shadow-black/40">
                
                {% if username == 0 %}

                <div class="text-center mt-12">
                    <h2 class="text-xl sm:text-3xl font-bold text-white min-h-[128px] sm:min-h-[82px]">
                        <span>Создайте тест по</span><br class="sm:hidden">
                        <span id="animated-headline-text" class="font-extrabold"></span>
                        <span id="animated-headline-cursor" class="text-[var(--color-text-secondary)] font-light">|</span>
                    </h2>
                </div>

                {% endif %}

                {% if username == 0 %}

                <div class="relative">
                    <textarea 
                        id="text-input" 
                        placeholder="Вставьте сюда текст – сгенерируем тест по нему.&#10;Например: Теорема Пифагора гласит, что в прямоугольном треугольнике квадрат длины гипотенузы равен сумме квадратов длин катетов..."
                        maxlength="5000"
                        class="w-full h-48 p-4 bg-[var(--color-bg)] border border-[var(--color-border)] rounded-2xl text-white resize-none
                            focus:outline-none focus:ring-2 focus:ring-[var(--color-accent-primary)] focus:caret-[var(--color-accent-primary)]
                            transition-shadow duration-300 focus:shadow-xl focus:shadow-[var(--color-accent-primary)]/20"
                    ></textarea>
                    <div class="absolute bottom-4 right-4 text-xs text-gray-500">
                        <span id="char-count">0</span> / 5000
                    </div>
                </div>

                <div class="mt-4 flex flex-col sm:flex-row items-center justify-between gap-4">
                    <div class="flex items-center gap-3">
                        <label for="question-slider" class="font-semibold text-white">Вопросов:</label>
                        <input type="range" id="question-slider" min="1" max="3" value="2" class="w-32">
                        <span id="question-count-display" class="font-bold text-lg highlight">2</span>

                        <div class="relative group">
                            <button class="w-8 h-8 flex items-center justify-center rounded-full bg-[var(--color-surface)] border border-[var(--color-border)] text-[var(--color-text-secondary)] hover:text-white transition-colors">
                                <i class="fas fa-question text-sm"></i>
                            </button>
                            <div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-3 w-72 p-4 
                                        bg-[var(--color-surface)]/80 backdrop-blur-xl border border-[var(--color-border)] 
                                        rounded-2xl text-sm text-[var(--color-text-secondary)]
                                        opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-10 shadow-2xl shadow-black/50">
                                
                                <p class="font-bold text-white mb-3">Увеличьте количество вопросов:</p>
                                
                                <ul class="space-y-3">
                                    <li class="flex items-center justify-between gap-3">
                                        <span>Без регистрации</span>
                                        <span class="px-2 py-0.5 rounded-full bg-black/20 font-mono font-bold text-white">до 3</span>
                                    </li>
                                    <li class="flex items-center justify-between gap-3">
                                        <a href="/register" class="text-[var(--color-accent-primary)] hover:underline font-semibold">Регистрация</a>
                                        <span class="px-2 py-0.5 rounded-full bg-black/20 font-mono font-bold text-white">до 7</span>
                                    </li>
                                    <li class="flex items-center justify-between gap-3">
                                        <a href="#pricing" class="gradient-text font-semibold hover:opacity-80">Премиум-доступ</a>
                                        <span class="px-2 py-0.5 rounded-full bg-black/20 font-mono font-bold text-white">до 15</span>
                                    </li>
                                </ul>
                                
                                <div class="absolute top-full left-1/2 -translate-x-1/2 w-4 h-4 mt-[-9px]">
                                    <div class="w-full h-full bg-[var(--color-surface)] border-b border-r border-[var(--color-border)] transform rotate-45"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {% if username != 0 %}
                        <div>
                            <a href="{% url 'create' %}" class="w-full flex items-center justify-center  sm:w-auto bg-[var(--color-accent-secondary)] text-black px-8 py-3 font-bold rounded-full transition-transform hover:scale-105 active:scale-100 disabled:opacity-50">
                                Создать и&nbsp;сохранить
                            </a>
                            <p class="mt-4">Создайте тест в личном кабинете, чтобы не потерять!</p>
                        </div>
                    {% else %}
                        <div class="flex gap-4">
                            <button id="upload-file-trigger" 
                                class="top-3 left-4 text-gray-400 hover:text-white transition-colors" 
                                title="Загрузить из файла (PDF, DOCX) — Премиум-функция">
                                <i class="fas fa-paperclip text-lg"></i>
                            </button>
                            <button id="generate-btn" data-loading-text="Генерация..." class="w-full sm:w-auto bg-[var(--color-accent-secondary)] text-black px-8 py-3 font-bold rounded-full transition-transform hover:scale-105 active:scale-100 disabled:opacity-50">
                                Сгенерировать тест
                            </button>
                        </div>
                        
                    {% endif %}

                    <div class="sm:hidden mt-2">
                        <a href="#analytics-showcase" class="text-sm text-[var(--color-text-secondary)] hover:text-white transition-colors group">
                            Что происходит <span class="group-hover:gradient-text font-semibold">после</span> прохождения? <span class="opacity-70 group-hover:opacity-100">&rarr;</span>
                        </a>
                    </div>
                </div>

                <div id="result-container" class="mt-8 pt-6 border-t border-dashed border-[var(--color-border)]" style="display: none;">
                    <h3 class="font-bold text-white text-lg">Ваши созданные тесты:</h3>
                    <div id="test-grid" class="mt-4 grid grid-cols-1 gap-4"></div>
                </div>

                {% else %}
                
                {% endif %}

                <div id="reg-promo" class="mt-8 text-center bg-[var(--color-bg)] p-8 rounded-2xl">
                    {% if username == 0 %}
                        <h3 class="text-2xl font-bold text-white">Раскройте полный потенциал Летучки!</h3>
                        <p class="mt-2 text-gray-400">Зарегистрируйтесь, чтобы сохранять тесты, загружать файлы и отслеживать прогресс.</p>
                        <a href="/register" class="mt-6 inline-block border border-[var(--color-accent-primary)] text-[var(--color-text-on-accent)] px-10 py-3 text-base font-bold rounded-full transition-transform hover:scale-105">
                            Получить 5 тестов бесплатно
                        </a>
                    {% else %}
                        <h3 class="text-2xl font-bold text-white">
                            <span class="gradient-text">{{ user.username }}</span>
                        </h3>
                        <p class="mt-2 text-gray-400">
                            Вы уже в системе. Все созданные тесты автоматически на Вашем аккаунте.
                        </p>
                        
                        <div class="mt-8 grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <a href="{% url 'history' %}" class="block bg-white/10 hover:bg-white/20 text-white px-6 py-3 font-bold rounded-full transition-colors">
                                <i class="fas fa-history mr-2"></i>
                                История тестов
                            </a>
                            <a href="{% url 'create' %}" class="block bg-[var(--color-accent-primary)] text-[var(--color-text-on-accent)] px-6 py-3 font-bold rounded-full transition-transform hover:opacity-90 hover:scale-105 active:scale-100">
                                <i class="fa-solid fa-arrow-right"></i>
                                Создать новый тест
                            </a>
                        </div>
                    {% endif %}
                </div>

            </div>
        </section>

        <!-- ====================================================== -->
        <!--         THE "FULL CYCLE" SUPER-FEATURE MANIFESTO       -->
        <!-- ====================================================== -->
        <section id="professional-manifesto" class="py-16 sm:py-24">
            <div class="max-w-5xl mx-auto px-4 sm:px-8 text-center">
                
                <h2 class="text-3xl sm:text-4xl font-extrabold text-white">
                    Создание теста <br>— это <span class="gradient-text">первый шаг.</span>
                </h2>
                <p class="mt-4 text-lg text-[var(--color-text-secondary)] max-w-2xl mx-auto">
                    Превратите свои тесты в машину для сбора данных. Это полный цикл: от&nbsp;создания теста до&nbsp;анализа результатов Ваших учеников.
                </p>

                <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8">
                    
                    <div class="bg-[var(--color-surface)] p-8 rounded-3xl border border-[var(--color-border)]">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-black/30 mx-auto">
                            <i class="fas fa-magic text-3xl text-[var(--color-accent-primary)]"></i>
                        </div>
                        <h3 class="mt-5 font-bold text-white text-xl">Создайте</h3>
                        <p class="mt-2 text-sm text-gray-400">Загрузите свои материалы в PDF/Word напрямую или просто вставьте текст из методички. Летучка сделает работу за Вас.</p>
                    </div>
                    
                    <div class="bg-[var(--color-surface)] p-8 rounded-3xl border border-[var(--color-border)]">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-black/30 mx-auto">
                            <i class="fas fa-share-alt text-3xl text-[var(--color-accent-primary)]"></i>
                        </div>
                        <h3 class="mt-5 font-bold text-white text-xl">Поделитесь</h3>
                        <p class="mt-2 text-sm text-gray-400">Отправьте ученикам одну простую ссылку. Никаких регистраций для них. Только тест.</p>
                    </div>

                    <div class="bg-[var(--color-surface)] p-8 rounded-3xl border border-[var(--color-border)]">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-black/30 mx-auto">
                            <i class="fas fa-chart-pie text-3xl text-[var(--color-accent-primary)]"></i>
                        </div>
                        <h3 class="mt-5 font-bold text-white text-xl">Анализируйте</h3>
                        <p class="mt-2 text-sm text-gray-400">Получайте готовые, наглядные отчеты по успеваемости в реальном времени и принимайте решения на основе данных.</p>
                    </div>

                </div>

                <div class="mt-16 text-center">
                    <a href="/register" class="inline-block bg-[var(--color-accent-secondary)] text-black px-12 py-4 text-lg font-bold rounded-full 
                                            transition-transform hover:scale-105 active:scale-100
                                            shadow-lg shadow-[var(--color-accent-secondary)]/30">
                        Получить полный контроль
                    </a>
                    <p class="mt-4 text-sm text-[var(--color-text-secondary)]">
                        Начните бесплатно, чтобы оценить все возможности.
                    </p>
                    <a href="#analytics-showcase" class="mt-4 block text-sm text-[var(--color-text-secondary)] hover:text-white transition-colors">
                        Что входит в аналитику <span class="opacity-70">&rarr;</span>
                    </a>
                </div>
            </div>
        </section>

        <section id="use-cases" class="py-16 sm:py-24 bg-[var(--color-surface)]/30">
            <div class="max-w-5xl mx-auto px-4 sm:px-8">
                <div class="text-center max-w-3xl mx-auto">
                    <h2 class="text-3xl sm:text-4xl font-extrabold text-white"><span class="gradient-text">Один инструмент</span> для любой задачи</h2>
                    <p class="mt-4 text-lg text-[var(--color-text-secondary)]">Неважно, какой у Вас материал. Летучка поможет составить тест по тексту для любой цели.</p>
                </div>
                
                <div class="mt-16 grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Юзкейс 1 -->
                    <div class="group bg-[var(--color-surface)] p-8 rounded-3xl border border-[var(--color-border)] hover:border-[var(--color-accent-primary)] transition-all duration-300 transform hover:-translate-y-2">
                        <div class="flex items-start gap-6">
                            <div class="flex-shrink-0 flex items-center justify-center h-16 w-16 rounded-2xl bg-black/20">
                                <i class="fas fa-book-open-reader text-3xl text-[var(--color-accent-primary)]"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-white text-m sm:text-xl">Проверка знаний по&nbsp;конспекту</h3>
                                <p class="mt-2 text-sm text-gray-400">Загрузите лекцию, чтобы быстро создать тест по&nbsp;тексту и&nbsp;проверить, насколько студенты усвоили материал перед семинаром.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Юзкейс 2 -->
                    <div class="group bg-[var(--color-surface)] p-8 rounded-3xl border border-[var(--color-border)] hover:border-[var(--color-accent-secondary)] transition-all duration-300 transform hover:-translate-y-2">
                        <div class="flex items-start gap-6">
                            <div class="flex-shrink-0 flex items-center justify-center h-16 w-16 rounded-2xl bg-black/20">
                                <i class="fas fa-user-graduate text-3xl text-[var(--color-accent-secondary)]"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-white text-m sm:text-xl">Самопроверка перед экзаменом</h3>
                                <p class="mt-2 text-sm text-gray-400">Превратите десятки страниц учебника в&nbsp;интерактивный тест. Лучший способ составить тест по&nbsp;тексту для самоконтроля.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Юзкейс 3 -->
                    <div class="group bg-[var(--color-surface)] p-8 rounded-3xl border border-[var(--color-border)] hover:border-[var(--color-accent-secondary)] transition-all duration-300 transform hover:-translate-y-2">
                        <div class="flex items-start gap-6">
                            <div class="flex-shrink-0 flex items-center justify-center h-16 w-16 rounded-2xl bg-black/20">
                                <i class="fas fa-briefcase text-3xl text-[var(--color-accent-secondary)]"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-white text-m sm:text-xl">Аттестация сотрудников</h3>
                                <p class="mt-2 text-sm text-gray-400">Нужно составить тест онлайн по&nbsp;тексту нового регламента? Вставьте его и&nbsp;получите готовые вопросы с&nbsp;автоматической проверкой.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Юзкейс 4 -->
                    <div class="group bg-[var(--color-surface)] p-8 rounded-3xl border border-[var(--color-border)] hover:border-[var(--color-accent-primary)] transition-all duration-300 transform hover:-translate-y-2">
                        <div class="flex items-start gap-6">
                            <div class="flex-shrink-0 flex items-center justify-center h-16 w-16 rounded-2xl bg-black/20">
                                <i class="fas fa-bolt-lightning text-3xl text-[var(--color-accent-primary)]"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-white text-m sm:text-xl">Быстрая летучка на&nbsp;5&nbsp;минут</h3>
                                <p class="mt-2 text-sm text-gray-400">Идеально, чтобы сделать тест из&nbsp;текста онлайн прямо на&nbsp;занятии. Вставьте параграф&nbsp;&mdash; и&nbsp;через пару секунд у&nbsp;вас готовый тест с&nbsp;результатами.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ====================================================== -->
        <!--         THE ANALYTICS DEEP DIVE V2 (YOUR SCREENSHOTS)  -->
        <!-- ====================================================== -->
        <section id="analytics-showcase" class="py-16 sm:py-24">
            <div class="max-w-5xl mx-auto px-4 sm:px-8">
                
                <!-- Заголовок секции -->
                <div class="text-center mb-24">
                    <h2 class="text-2xl sm:text-4xl font-extrabold text-white">
                        От&nbsp;хаоса данных&nbsp;&mdash; <br>к&nbsp;<span class="gradient-text">ясным решениям.</span>
                    </h2>
                    <p class="mt-4 text-lg text-[var(--color-text-secondary)] max-w-3xl mx-auto">
                        Это Ваш новый центр управления, который показывает, что работает, а что требует вашего внимания.
                    </p>
                </div>

                <div class="space-y-24">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                        <div>
                            <img src="{% static 'blog_img/analys4.png' %}" 
                                alt="Графики активности по часам и популярных тестов" 
                                class="w-full rounded-3xl border-2 border-[var(--color-border)] shadow-2xl shadow-black/50">
                        </div>
                        <div class="text-center lg:text-left">
                            <span class="inline-block px-3 py-1 text-xs font-semibold gradient-text bg-white/5 rounded-full mb-3">01. Пульс вашей аудитории</span>
                            <h3 class="text-2xl sm:text-3xl font-bold text-[#F0E5F0]">Поймите, когда и что интересно</h3>
                            <p class="mt-4 text-[var(--color-text-secondary)]">
                                Определяйте пики активности в&nbsp;течение дня, чтобы понять, когда Ваши тесты наиболее востребованы. Мгновенно выявляйте самые популярные тесты, которые вызывают наибольший отклик.
                            </p>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                        <div class="text-center lg:text-left lg:order-first">
                            <span class="inline-block px-3 py-1 text-xs font-semibold gradient-text bg-white/5 rounded-full mb-3">02. Картина успеваемости</span>
                            <h3 class="text-2xl sm:text-3xl font-bold text-[#F0E5F0]">Оценивайте знания, а&nbsp;не&nbsp;догадки</h3>
                            <p class="mt-4 text-[var(--color-text-secondary)]">
                                Отслеживайте динамику прохождений по&nbsp;дням и&nbsp;получайте четкое распределение результатов. Сразу видите, какой процент аудитории справляется на&nbsp;&laquo;отлично&raquo;, а&nbsp;кому требуется дополнительное внимание.
                            </p>
                        </div>
                        <div class="lg:order-last">
                            <img src="{% static 'blog_img/analys3.png' %}" 
                                alt="Графики прохождений тестов и распределения результатов" 
                                class="w-full rounded-3xl border-2 border-[var(--color-border)] shadow-2xl shadow-black/50">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                        <div>
                            <img src="{% static 'blog_img/analys2.png' %}" 
                                alt="Графики созданных и просмотренных тестов" 
                                class="w-full rounded-3xl border-2 border-[var(--color-border)] shadow-2xl shadow-black/50">
                        </div>
                        <div class="text-center lg:text-left">
                            <span class="inline-block px-3 py-1 text-xs font-semibold gradient-text bg-white/5 rounded-full mb-3">03. Вовлеченность в динамике</span>
                            <h3 class="text-2xl sm:text-3xl font-bold text-[#F0E5F0]">Свяжите создание контента с&nbsp;его популярностью</h3>
                            <p class="mt-4 text-[var(--color-text-secondary)]">
                                Сравнивайте, как создание новых тестов влияет на&nbsp;их&nbsp;просмотры. Отслеживайте, какой контент популярен, а&nbsp;какой остается незамеченным, и&nbsp;корректируйте свою стратегию на&nbsp;лету.
                            </p>
                        </div>
                    </div>

                </div>

                <div class="mt-24 text-center max-w-xl mx-auto">
                    <h3 class="text-2xl font-extrabold text-white">Это – Ваш новый центр управления.</h3>
                    <p class="mt-2 text-gray-400">Начните видеть полную картину и&nbsp;принимайте решения, основанные на&nbsp;реальных данных.</p>
                    <div class="mt-8">
                        <button data-trigger-modal="register" class="block w-full text-center bg-[var(--color-accent-primary)] text-white font-bold text-lg py-4 rounded-full transition hover:opacity-90 active:opacity-70 transition-transform active:scale-[.97] shadow-lg shadow-[var(--color-accent-primary)]/30">
                            Открыть полный доступ к&nbsp;аналитике
                        </button>
                    </div>
                </div>

            </div>
        </section>

        <!-- ====================================================== -->
        <!--         HOW IT WORKS V3: VISUAL MANIFESTO              -->
        <!-- ====================================================== -->
        <section id="transformation-engine" class="py-16 sm:py-24">
            <div class="max-w-6xl mx-auto px-4 sm:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-3xl sm:text-4xl font-extrabold text-white">
                        Ваша рутина  —  <span class="gradient-text">наша забота.</span>
                    </h2>
                    <p class="mt-4 text-lg text-[var(--color-text-secondary)] max-w-3xl mx-auto">
                        Перестаньте тратить часы на рутину. Делегируйте механическую работу <span class="gradient-text">Летучке</span> и сфокусируйтесь на том, что действительно важно — на обучении.
                    </p>
                </div>

                <div class="grid lg:grid-cols-2 gap-12 items-start">
                    
                    <!-- Левая колонка: БОЛЬ (THE PAIN) -->
                    <div class="bg-[var(--color-surface)] p-8 rounded-3xl border border-[var(--color-border)] h-full">
                        <h3 class="text-2xl font-bold text-white">Знакомый сценарий?</h3>
                        <p class="mt-2 text-gray-400">Вечер воскресенья. Вместо отдыха вы:</p>
                        <ul class="mt-6 space-y-4">
                            <li class="flex items-start gap-3">
                                <i class="fas fa-file-word text-lg text-red-500 mt-1"></i>
                                <span>Вручную копируете вопросы из методички в Word, борясь с форматированием.</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <i class="fas fa-random text-lg text-red-500 mt-1"></i>
                                <span>Перемешиваете задания, чтобы создать 2-3 варианта теста и избежать списывания.</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <i class="fas fa-key text-lg text-red-500 mt-1"></i>
                                <span>Делаете отдельный файл с ответами, молясь не ошибиться в нумерации.</span>
                            </li>
                            <li class="flex items-start gap-3 font-semibold">
                                <i class="fas fa-hourglass-end text-lg text-red-400 mt-1"></i>
                                <span>Теряете 2 часа драгоценного времени на работу, которую должна делать машина.</span>
                            </li>
                        </ul>
                    </div>

                    <!-- Правая колонка: РЕШЕНИЕ (THE SOLUTION) -->
                    <div class="space-y-8">
                        <div>
                            <span class="inline-block px-3 py-1 text-xs font-semibold text-[var(--color-accent-secondary)] bg-[var(--color-accent-secondary)]/10 rounded-full mb-2">Шаг 1</span>
                            <h3 class="text-2xl font-bold text-white">Загрузите любой материал</h3>
                            <p class="mt-2 text-gray-400">Просто перетащите ваш файл (PDF, DOCX) или вставьте текст из любого источника — будь то конспект, статья или параграф из учебника.</p>
                        </div>
                        <div>
                            <span class="inline-block px-3 py-1 text-xs font-semibold text-[var(--color-accent-secondary)] bg-[var(--color-accent-secondary)]/10 rounded-full mb-2">Шаг 2</span>
                            <h3 class="text-2xl font-bold text-white">Сгенерируйте уникальные вопросы</h3>
                            <p class="mt-2 text-gray-400">Наш генератор тестов проанализирует содержание и за 30 секунд создаст релевантные вопросы с вариантами ответов и правильными ключами.</p>
                        </div>
                        <div>
                            <span class="inline-block px-3 py-1 text-xs font-semibold text-[var(--color-accent-secondary)] bg-[var(--color-accent-secondary)]/10 rounded-full mb-2">Шаг 3</span>
                            <h3 class="text-2xl font-bold text-white">Поделитесь или скачайте PDF</h3>
                            <p class="mt-2 text-gray-400">Отправьте ученикам ссылку с тестом или скачайте готовый к печати PDF-файл с вариантами и листом ответов.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="technology" class="py-16 sm:py-24">
            <div class="max-w-5xl mx-auto px-4 sm:px-8">
                <div class="text-center max-w-3xl mx-auto">
                    <h2 class="text-3xl sm:text-4xl font-bold text-white">Как <span class="gradient-text">Летучка</span> создаёт качественные вопросы?</h2>
                    <p class="mt-4 text-lg text-[var(--color-text-secondary)]">Наш AI позволяет составить тест по тексту онлайн, который действительно проверяет знания, а не просто ищет совпадения по словам.</p>
                </div>
                <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="bg-[var(--color-surface)] p-8 rounded-2xl border border-[var(--color-border)]">
                        <i class="fas fa-project-diagram text-2xl text-[var(--color-accent-primary)] mb-4"></i>
                        <h3 class="font-bold text-white text-lg">Семантический анализ текста</h3>
                        <p class="mt-2 text-sm text-gray-400">AI&nbsp;понимает контекст и&nbsp;связи между понятиями. Это позволяет создать тест по&nbsp;тексту, который проверяет глубину понимания, а&nbsp;не&nbsp;поверхностную зубрёжку.</p>
                    </div>
                    <div class="bg-[var(--color-surface)] p-8 rounded-2xl border border-[var(--color-border)]">
                        <i class="fas fa-graduation-cap text-2xl text-[var(--color-accent-primary)] mb-4"></i>
                        <h3 class="font-bold text-white text-lg">Генерация вопросов разной сложности</h3>
                        <p class="mt-2 text-sm text-gray-400">Алгоритмы генерируют не&nbsp;только репродуктивные, но&nbsp;и&nbsp;проблемные вопросы. Идеально, если вам нужно составление тестов по&nbsp;тексту онлайн для разных уровней подготовки.</p>
                    </div>
                    <div class="bg-[var(--color-surface)] p-8 rounded-2xl border border-[var(--color-border)]">
                        <i class="fas fa-file-circle-check text-2xl text-[var(--color-accent-primary)] mb-4"></i>
                        <h3 class="font-bold text-white text-lg">Автоматическое создание ключей</h3>
                        <p class="mt-2 text-sm text-gray-400">Система формирует правильный ответ на&nbsp;каждый вопрос. Это основа, чтобы создать тест онлайн с&nbsp;результатами бесплатно и&nbsp;без ручной проверки.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ====================================================== -->
        <!--         TRANSFORMATION BLOCK: FROM CHAOS TO ORDER        -->
        <!-- ====================================================== -->
        <section id="the-choice" class="py-16 sm:py-24">
            <div class="max-w-4xl mx-auto px-4 sm:px-8">
                <div class="text-center max-w-3xl mx-auto">
                    <h2 class="text-3xl sm:text-4xl font-extrabold text-white leading-tight">
                        <span class="gradient-text">Выбор за вами.</span>
                    </h2>
                    <p class="mt-4 text-lg text-[var(--color-text-secondary)]">
                        Один и тот же результат можно получить по-разному. <br>Переключите, чтобы увидеть разницу.
                    </p>
                </div>

                <!-- ПЕРЕКЛЮЧАТЕЛЬ -->
                <div class="mt-12 flex items-center justify-center space-x-4">
                    <span id="routine-label" class="font-semibold text-white transition-opacity duration-300">Путь Рутины</span>
                    <input type="checkbox" id="choice-toggle" class="hidden toggle-input"> 
                    <label for="choice-toggle" class="cursor-pointer">
                        <div class="w-14 h-8 flex items-center bg-gray-700 rounded-full p-1 toggler transition-colors">
                            <div class="w-6 h-6 bg-gray-400 rounded-full shadow-md transform transition-transform dot"></div>
                        </div>
                    </label>
                    <span id="letuchka-label" class="font-semibold text-white transition-opacity duration-300 opacity-50">Путь Летучки</span>
                </div>

                <!-- КОНТЕЙНЕР ДЛЯ КАРТОЧЕК -->
                <div class="mt-8 relative">
                    
                    <!-- КАРТОЧКА "ПУТЬ РУТИНЫ" -->
                    <div id="routine-card" class="bg-[#1a1625] p-8 rounded-3xl border border-gray-800">
                        <h3 class="text-xl font-bold text-center text-gray-400">Создание теста вручную</h3>
                        <div class="mt-6 space-y-4">
                            <div class="flex items-center gap-4 p-4 bg-gray-900/50 rounded-lg">
                                <i class="fas fa-file-word text-2xl text-gray-600"></i>
                                <span class="text-gray-400"><strong>Задача 1:</strong> Копи-паст вопросов из методички в Word</span>
                            </div>
                            <div class="flex items-center gap-4 p-4 bg-gray-900/50 rounded-lg">
                                <i class="fas fa-random text-2xl text-gray-600"></i>
                                <span class="text-gray-400"><strong>Задача 2:</strong> Перемешивание вопросов для 2-го варианта</span>
                            </div>
                            <div class="flex items-center gap-4 p-4 bg-gray-900/50 rounded-lg">
                                <i class="fas fa-key text-2xl text-gray-600"></i>
                                <span class="text-gray-400"><strong>Задача 3:</strong> Создание отдельного файла с ответами</span>
                            </div>
                        </div>
                        <div class="mt-6 pt-4 border-t border-gray-800 text-center">
                            <p class="text-lg font-bold text-white"><span class="text-red-500">~2 часа</span>, риск ошибок, нервы.</p>
                        </div>
                    </div>

                    <!-- КАРТОЧКА "ПУТЬ ЛЕТУЧКИ" -->
                    <div id="letuchka-card" class="hidden bg-gradient-to-br from-[var(--color-accent-primary)]/10 to-transparent p-8 rounded-3xl border border-[var(--color-border)]">
                        <h3 class="text-xl font-bold text-center text-white">Создание теста с Летучкой</h3>
                        <div class="mt-6 space-y-4">
                            <div class="flex items-center gap-4 p-4 bg-black/20 rounded-lg">
                                <i class="fas fa-upload text-2xl text-[var(--color-accent-secondary)]"></i>
                                <span class="text-white"><strong>Задача 1:</strong> Загрузить файл или вставить текст</span>
                            </div>
                            <div class="flex items-center gap-4 p-4 bg-black/20 rounded-lg">
                                <i class="fas fa-magic text-2xl text-[var(--color-accent-secondary)]"></i>
                                <span class="text-white"><strong>Задача 2:</strong> Нажать кнопку "Сгенерировать"</span>
                            </div>
                            <div class="flex items-center gap-4 p-4 bg-black/20 rounded-lg">
                                <i class="fas fa-download text-2xl text-[var(--color-accent-secondary)]"></i>
                                <span class="text-white"><strong>Задача 3:</strong> Пойти тест, скачать готовый PDF или поделиться ссылкой</span>
                            </div>
                        </div>
                        <div class="mt-6 pt-4 border-t border-[var(--color-border)] text-center">
                            <p class="text-lg font-bold text-white"><span class="text-[var(--color-accent-secondary)]">30 секунд</span>, точность, свободное время.</p>
                        </div>
                    </div>

                </div>
            </div>
        </section>

        <!-- ====================================================== -->
        <!--         THE DATA SOVEREIGNTY FORTRESS V2             -->
        <!-- ====================================================== -->
        <section id="infrastructure-trust" class="py-16 sm:py-24">
            <div class="max-w-5xl mx-auto px-4 sm:px-8">
                <div class="text-center max-w-3xl mx-auto">
                    <h2 class="text-3xl sm:text-4xl font-extrabold text-white">
                        <span class="gradient-text">Суверенитет данных.</span>
                    </h2>
                    <p class="mt-4 text-lg text-[var(--color-text-secondary)]">
                        Мы развернули собственную инфраструктуру в России, чтобы вы были уверены: ваши материалы и данные учеников под полным контролем.
                    </p>
                </div>
                <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="group bg-[var(--color-surface)] p-8 rounded-3xl border border-[var(--color-border)] text-center transition-all duration-300 transform hover:-translate-y-2 hover:shadow-2xl hover:shadow-black/50">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-black/30 mx-auto">
                            <i class="fas fa-map-marker-alt text-3xl text-[var(--color-accent-secondary)]"></i>
                        </div>
                        <h3 class="mt-5 font-bold text-white text-lg">Данные в России</h3>
                        <p class="mt-2 text-sm text-gray-400">Вся инфраструктура и&nbsp;данные размещены в&nbsp;сертифицированных дата-центрах на&nbsp;территории&nbsp;РФ в&nbsp;полном соответствии с&nbsp;ФЗ-152.</p>
                    </div>
                    <div class="group bg-[var(--color-surface)] p-8 rounded-3xl border border-[var(--color-border)] text-center transition-all duration-300 transform hover:-translate-y-2 hover:shadow-2xl hover:shadow-black/50">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-black/30 mx-auto">
                            <i class="fas fa-server text-3xl text-[var(--color-accent-secondary)]"></i>
                        </div>
                        <h3 class="mt-5 font-bold text-white text-lg">Свои серверы</h3>
                        <p class="mt-2 text-sm text-gray-400">Мы&nbsp;не&nbsp;зависим от&nbsp;иностранных облаков. Отечественные поставщики&nbsp;&mdash; это гарантия стабильности и&nbsp;отсутствия доступа третьих сторон.</p>
                    </div>
                    <div class="group bg-[var(--color-surface)] p-8 rounded-3xl border border-[var(--color-border)] text-center transition-all duration-300 transform hover:-translate-y-2 hover:shadow-2xl hover:shadow-black/50">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-black/30 mx-auto">
                            <i class="fas fa-eye text-3xl text-[var(--color-accent-secondary)]"></i>
                        </div>
                        <h3 class="mt-5 font-bold text-white text-lg">Аудит и прозрачность</h3>
                        <p class="mt-2 text-sm text-gray-400">Открытая политика обработки данных. Вы&nbsp;всегда знаете, где и&nbsp;как хранится информация&nbsp;&mdash; без скрытых алгоритмов. <a class="text-[var(--color-accent-primary)]" href="/docs/privacy-policy/">Подробнее</a></p>
                    </div>
                </div>
            </div>
        </section>

        <section id="telegram-login" class="py-16 sm:py-24">
            <div class="max-w-5xl mx-auto px-4 sm:px-8 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                <!-- Левая часть: Макет -->
                <div class="relative flex justify-center lg:justify-end">
                    <div class="w-80 bg-[var(--color-bg)] rounded-[40px] p-2 border-2 border-[var(--color-border)] shadow-2xl shadow-black/50">
                        <div class="rounded-[32px] overflow-hidden">
                            <img src="{% static 'blog_img/letychka-telegram-1007.png' %}" alt="Телефон с Telegram ботом Летучка" class="w-full h-full object-cover">
                        </div>
                    </div>
                </div>

                <!-- Правая часть: Ценность -->
                <div class="text-center lg:text-left">
                    <h2 class="text-3xl sm:text-4xl font-bold text-white leading-tight">
                        <span class="highlight">Замена паролям.</span><br>
                    </h2>
                    <h3 class="text-2xl sm:text-3xl">Только Ваш Telegram.</h3>
                    <p class="mt-4 text-[var(--color-text-secondary)] max-w-md mx-auto lg:mx-0">
                        Мы&nbsp;убрали самый бесячий этап&nbsp;&mdash; регистрацию и&nbsp;запоминание паролей. Ваш аккаунт&nbsp;&mdash; это Ваш Telegram. Безопасно, мгновенно и&nbsp;всегда под рукой.
                    </p>
                    <div class="mt-8">
                        <a href="https://t.me/LetychkaRobot" target="_blank" class="inline-block bg-[var(--color-accent-primary)] text-white px-8 py-3 font-semibold rounded-full transition hover:opacity-90 active:opacity-70 transition-transform active:scale-[.97]">Попробовать вход в 1 клик →</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- ====================================================== -->
        <!--         STATS V2: SOCIAL PROOF ON STEROIDS             -->
        <!-- ====================================================== -->
        <section id="stats" class="py-16 sm:py-24">
            <div class="max-w-5xl mx-auto px-4 sm:px-8">
                <div class="text-center">
                    <h2 class="text-3xl sm:text-4xl font-extrabold text-white"><span class="gradient-text">Цифры</span>, а не слова.</h2>
                </div>
                <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8">
                    
                    <!-- СТАТИСТИКА 1: ПОЛЬЗОВАТЕЛИ -->
                    <div class="group bg-[var(--color-surface)] p-8 rounded-3xl border border-[var(--color-border)] text-center transition-transform duration-300 transform hover:-translate-y-2 hover:shadow-2xl hover:shadow-black/50">
                        <div class="flex justify-center mb-4">
                            <div class="flex items-center justify-center h-16 w-16 rounded-full bg-black/30">
                                <i class="fas fa-users text-3xl text-[var(--color-accent-primary)]"></i>
                            </div>
                        </div>
                        <p class="text-5xl font-black gradient-text" data-target="2400">0</p>
                        <p class="text-sm text-gray-400 mt-1">Преподавателей и&nbsp;студентов</p>
                    </div>
                    
                    <!-- СТАТИСТИКА 2: ВРЕМЯ -->
                    <div class="group bg-[var(--color-surface)] p-8 rounded-3xl border border-[var(--color-border)] text-center transition-transform duration-300 transform hover:-translate-y-2 hover:shadow-2xl hover:shadow-black/50">
                        <div class="flex justify-center mb-4">
                            <div class="flex items-center justify-center h-16 w-16 rounded-full bg-black/30">
                                <i class="fas fa-clock text-3xl text-[var(--color-accent-secondary)]"></i>
                            </div>
                        </div>
                        <p class="text-5xl font-black gradient-text" data-target="8">0+</p>
                        <p class="text-sm text-gray-400 mt-1">Часов в&nbsp;неделю экономят в&nbsp;среднем</p>
                    </div>
                    
                    <!-- СТАТИСТИКА 3: ТЕСТЫ -->
                    <div class="group bg-[var(--color-surface)] p-8 rounded-3xl border border-[var(--color-border)] text-center transition-transform duration-300 transform hover:-translate-y-2 hover:shadow-2xl hover:shadow-black/50">
                        <div class="flex justify-center mb-4">
                            <div class="flex items-center justify-center h-16 w-16 rounded-full bg-black/30">
                                <i class="fas fa-file-alt text-3xl text-[var(--color-accent-primary)]"></i>
                            </div>
                        </div>
                        <p class="text-5xl font-black gradient-text" data-target="23000">0</p>
                        <p class="text-sm text-gray-400 mt-1">Тестов создано на платформе</p>
                    </div>
                    
                </div>
            </div>
        </section>

        <section id="pricing" class="py-16 sm:py-24">
            <div class="max-w-4xl mx-auto text-center px-4">
                <h2 class="text-3xl sm:text-4xl font-extrabold text-white">Для начала нужен <span class="gradient-text">План.</span></h2>
                <p class="mt-4 text-lg text-[var(--color-text-secondary)]">Выберите удобный срок доступа ко всем возможностям Летучки.</p>
            </div>

            <div class="mt-12 grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto items-center px-4">

                <div class="bg-[var(--color-surface)] p-8 rounded-3xl border border-[var(--color-border)] flex flex-col h-full text-center">
                    <!-- flex-grow заставляет этот блок растянуться и прижать кнопку к низу -->
                    <div class="flex-grow">
                        <h3 class="font-bold text-white text-xl">Неделя</h3>
                        <p class="mt-1 text-sm text-[var(--color-text-secondary)]">Тест-драйв всех функций</p>
                        <div class="my-6">
                            <p class="text-5xl font-extrabold text-white">290 <span class="text-xl font-medium text-gray-400">₽</span></p>
                            <p class="text-white/80 m-2">290 ₽ / неделя</p>
                            <p class="text-sm text-gray-400">абонемент, не подписка</p>
                        </div>
                    </div>
                    <button data-trigger-modal="register" class="mt-8 block w-full text-center bg-[var(--color-accent-primary)] text-white font-bold text-m py-4 rounded-full transition hover:opacity-90 active:opacity-80 transition-transform active:scale-[.97] shadow-lg shadow-[var(--color-accent-primary)]/30">
                        Выбрать на неделю
                    </button>
                </div>

                <!-- КАРТОЧКА: 3 МЕСЯЦА (ГЛАВНАЯ) -->
                <div class="relative p-8 rounded-3xl bg-[var(--color-surface)] border-2 border-[var(--color-accent-primary)] flex flex-col h-full text-center transform scale-105 shadow-2xl shadow-[var(--color-accent-primary)]/20">
                    <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2">
                        <div class="bg-[var(--color-accent-primary)] text-white text-sm font-bold px-4 py-1.5 rounded-full uppercase tracking-wider">Максимум выгоды</div>
                    </div>
                    <!-- flex-grow здесь тоже! -->
                    <div class="flex-grow">
                        <h3 class="font-bold text-white text-2xl">3 Месяца</h3>
                        <p class="mt-1 text-sm text-[var(--color-text-secondary)]">Для регулярной работы</p>
                        <div class="my-6">
                            <p class="text-2xl text-gray-400 line-through">2070 ₽</p>
                            <p class="text-6xl font-extrabold text-white">1440<span class="text-2xl font-medium text-gray-400"> ₽</span></p>
                            <p class="text-white/80 m-2">~120 ₽ / неделя</p>
                            <p class="text-sm text-gray-400">абонемент, не подписка</p>
                            <p class="mt-2 text-lg font-bold text-[var(--color-accent-secondary)]">Экономия 61%</p>
                        </div>
                    </div>
                    <button data-trigger-modal="register" class="mt-8 block w-full text-center bg-[var(--color-accent-primary)] text-white font-bold text-m py-4 rounded-full transition hover:opacity-90 active:opacity-80 transition-transform active:scale-[.97] shadow-lg shadow-[var(--color-accent-primary)]/30">
                        Выбрать на 3 месяца
                    </button>
                </div>
                
                <!-- КАРТОЧКА: МЕСЯЦ -->
                <div class="bg-[var(--color-surface)] p-8 rounded-3xl border border-[var(--color-border)] flex flex-col h-full text-center">
                    <!-- и здесь flex-grow -->
                    <div class="flex-grow">
                        <h3 class="font-bold text-white text-xl">Месяц</h3>
                        <p class="mt-1 text-sm text-[var(--color-text-secondary)]">Полный доступ</p>
                        <div class="my-6">
                            <p class="text-5xl font-extrabold text-white">690 <span class="text-xl font-medium text-gray-400">₽</span></p>
                            <p class="text-white/80 m-2">~172 ₽ / неделя</p>
                            <p class="text-sm text-gray-400">абонемент, не подписка</p>
                            <p class="mt-2 text-lg font-bold text-[var(--color-accent-secondary)]">Экономия 44%</p>
                        </div>
                    </div>
                    <button data-trigger-modal="register" class="mt-8 block w-full text-center bg-[var(--color-accent-primary)] text-white font-bold text-m py-4 rounded-full transition hover:opacity-90 active:opacity-80 transition-transform active:scale-[.97] shadow-lg shadow-[var(--color-accent-primary)]/30">
                        Выбрать на месяц
                    </button>
                </div>
            </div>

            <!-- НОВЫЙ БЛОК-ВИТРИНА С ФИЧАМИ -->
            <div class="max-w-4xl mx-auto mt-16 text-center">
                <h3 class="text-lg font-semibold text-white"><span class="gradient-text">Все тарифы включают</span></h3>
                <!-- СЕТКА С ФИЧАМИ -->
                <div class="mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- ФИЧА 1: Автоматизация -->
                    <div class="bg-[var(--color-surface)] p-6 rounded-2xl border border-[var(--color-border)] text-left hover:border-[var(--color-accent-primary)] hover:-translate-y-1 transition-all duration-300">
                        <i class="fas fa-magic text-2xl text-[var(--color-accent-primary)] mb-3"></i>
                        <h3 class="font-bold text-white">Полная автоматизация</h3>
                        <p class="text-sm text-[var(--color-text-secondary)] mt-1">Создавайте тесты напрямую из&nbsp;ваших PDF и&nbsp;Word файлов. Экономьте часы работы.</p>
                    </div>
                    <!-- ФИЧА 2: Аналитика -->
                    <div class="bg-[var(--color-surface)] p-6 rounded-2xl border border-[var(--color-border)] text-left hover:border-[var(--color-accent-primary)] hover:-translate-y-1 transition-all duration-300">
                        <i class="fas fa-chart-pie text-2xl text-[var(--color-accent-primary)] mb-3"></i>
                        <h3 class="font-bold text-white">Аналитика на&nbsp;дашбордах</h3>
                        <p class="text-sm text-[var(--color-text-secondary)] mt-1">Отслеживайте прогресс учеников и&nbsp;смотрите детальную карту ошибок по&nbsp;всем тестам.</p>
                    </div>
                    <!-- ФИЧА 3: Экспорт -->
                    <div class="bg-[var(--color-surface)] p-6 rounded-2xl border border-[var(--color-border)] text-left hover:border-[var(--color-accent-primary)] hover:-translate-y-1 transition-all duration-300">
                        <i class="fas fa-file-excel text-2xl text-[var(--color-accent-primary)] mb-3"></i>
                        <h3 class="font-bold text-white">Экспорт в Excel</h3>
                        <p class="text-sm text-[var(--color-text-secondary)] mt-1">Выгружайте результаты для отчётности и&nbsp;архива в&nbsp;один клик.</p>
                    </div>
                    <!-- ФИЧА 4: Лимиты -->
                    <div class="bg-[var(--color-surface)] p-6 rounded-2xl border border-[var(--color-border)] text-left hover:border-[var(--color-accent-primary)] hover:-translate-y-1 transition-all duration-300">
                        <i class="fas fa-infinity text-2xl text-[var(--color-accent-primary)] mb-3"></i>
                        <h3 class="font-bold text-white">Максимальные лимиты</h3>
                        <p class="text-sm text-[var(--color-text-secondary)] mt-1">Создавайте до&nbsp;50&nbsp;тестов в&nbsp;сутки (до&nbsp;15&nbsp;вопросов в&nbsp;каждом).</p>
                    </div>
                    <!-- ФИЧА 5: Без водяных знаков -->
                    <div class="bg-[var(--color-surface)] p-6 rounded-2xl border border-[var(--color-border)] text-left hover:border-[var(--color-accent-primary)] hover:-translate-y-1 transition-all duration-300">
                        <i class="fas fa-print text-2xl text-[var(--color-accent-primary)] mb-3"></i>
                        <h3 class="font-bold text-white">Тесты без водяных знаков</h3>
                        <p class="text-sm text-[var(--color-text-secondary)] mt-1">Скачивайте тесты, которые сразу готовы к&nbsp;печати. Чисто и&nbsp;профессионально.</p>
                    </div>
                    <!-- ФИЧА 6: Самопроверка -->
                    <div class="bg-[var(--color-surface)] p-6 rounded-2xl border border-[var(--color-border)] text-left hover:border-[var(--color-accent-primary)] hover:-translate-y-1 transition-all duration-300">
                        <i class="fas fa-user-check text-2xl text-[var(--color-accent-primary)] mb-3"></i>
                        <h3 class="font-bold text-white">Самопроверка</h3>
                        <p class="text-sm text-[var(--color-text-secondary)] mt-1">Проходите тесты прямо на&nbsp;платформе, чтобы убедиться в&nbsp;качестве вопросов.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- БЛОК: ОПЛАТА ДОЛЯМИ -->
        <section id="security" class="py-16 sm:py-24">
            <div class="max-w-4xl mx-auto px-4 sm:px-8">
                <div class="text-center">
                    <h2 class="text-3xl sm:text-4xl font-extrabold text-white"><span class="gradient-text">Безопасность</span> — это <span class="gradient-text">фундамент.</span></h2>
                    <p class="mt-4 text-lg text-[var(--color-text-secondary)]">Оплата в одно касание через проверенные сервисы. Быстро, привычно и на 100% безопасно.</p>
                </div>

                <!-- ГАРАНТИИ БЕЗОПАСНОСТИ -->
                <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    
                    <div class="bg-[var(--color-surface)] p-4 rounded-3xl border border-[var(--color-border)]">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-black/30 mx-auto">
                            <i class="fas fa-wand-magic-sparkles text-3xl text-[var(--color-accent-secondary)]"></i>
                        </div>
                        <h3 class="mt-5 font-bold text-white text-lg">Платите как удобно</h3>
                        <p class="mt-2 text-sm text-gray-400">Забудьте о&nbsp;неудобных формах. Оплачивайте подписку в&nbsp;одно касание картой, через SberPay, T-Pay или СБП. Быстро и&nbsp;безопасно.</p>
                    </div>
                    
                    <div class="bg-[var(--color-surface)] p-4 rounded-3xl border border-[var(--color-border)]">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-black/30 mx-auto">
                            <i class="fas fa-shield-halved text-3xl text-[var(--color-accent-secondary)]"></i>
                        </div>
                        <h3 class="mt-5 font-bold text-white text-lg">Банковский уровень защиты</h3>
                        <p class="mt-2 text-sm text-gray-400">Все платежи обрабатываются АО&nbsp;&laquo;Т-Банк&raquo; по&nbsp;стандарту PCI&nbsp;DSS. Это высший стандарт безопасности, гарантирующий, что Ваша транзакция защищена.</p>
                    </div>

                    <div class="bg-[var(--color-surface)] p-4 rounded-3xl border border-[var(--color-border)]">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-black/30 mx-auto">
                            <i class="fas fa-user-secret text-3xl text-[var(--color-accent-secondary)]"></i>
                        </div>
                        <h3 class="mt-5 font-bold text-white text-lg">Ваши данные&nbsp;&mdash; не&nbsp;наш бизнес</h3>
                        <p class="mt-2 text-sm text-gray-400">Мы&nbsp;не&nbsp;видим и&nbsp;тем более не&nbsp;храним полные данные вашей карты. Они отправляются напрямую, в&nbsp;зашифрованный банковский шлюз.</p>
                    </div>

                </div>

                <!-- БЛОК "ДОЛЯМИ" -->
                <div class="mt-12">
                    <div class="bg-gradient-to-r from-[#211a32] to-[var(--color-surface)] p-8 rounded-3xl border border-[var(--color-border)]">
                        <div class="flex flex-col md:flex-row items-center gap-8 text-center md:text-left">
                            <div class="flex-shrink-0 text-center">
                                <!-- SVG логотипы для идеального отображения -->
                                <div class="flex-shrink-0">
                                    <img width="300" height="48" src="{% static 'img/dolyami.png' %}" alt="Летучка: Оплата Долями">
                                </div>
                                <p class="text-xs text-gray-500 mt-2">Официальный партнер</p>
                            </div>
                            <div>
                                <h4 class="text-xl font-bold text-white">Платите, как Вам удобно.</h4>
                                <p class="text-[var(--color-text-secondary)] mt-1">Разделите годовую подписку на&nbsp;4&nbsp;равных платежа &laquo;Долями&raquo;. Первый платеж&nbsp;&mdash; сегодня, остальные&nbsp;&mdash; потом.</p>
                            </div>
                        </div>
                    </div>
                    <div class="text-center">
                        <div class="mt-8 flex flex-col sm:flex-row items-center justify-center gap-4">
                            <button id="open-register-modal-btn" class="w-full sm:w-auto bg-[var(--color-accent-primary)] text-white px-10 py-4 font-bold rounded-full transition-transform hover:opacity-90 active:opacity-80 transition-transform active:scale-[.97]">
                                Перейти на Премиум
                            </button>
                            <a href="/register" class="w-full sm:w-auto text-sm text-gray-400 hover:text-white">или попробовать бесплатно</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ====================================================== -->
        <!--         FAQ                 -->
        <!-- ====================================================== -->
        <section id="faq" class="py-16 sm:py-24">
            <div class="max-w-3xl mx-auto px-4 sm:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-3xl sm:text-4xl font-extrabold text-white"><span class="gradient-text">Частые вопросы.</span></h2>
                    <p class="mt-4 text-lg text-[var(--color-text-secondary)]">Разбираем всё по полочкам</p>
                </div>
                
                <div class="space-y-4">
                    
                    <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wider pt-8">Основы работы</h3>
                    
                    <details class="group bg-[#1a1625] rounded-2xl border border-[var(--color-border)] transition-all duration-300 hover:border-[var(--color-accent-primary)] overflow-hidden">
                        <summary class="flex items-center justify-between p-6 cursor-pointer">
                            <span class="font-semibold text-white text-lg">Что именно делает Летучка, и в чем ее <strong>уникальная ценность</strong>?</span>
                            <i class="fas fa-plus text-gray-500 transition-transform duration-300 icon-plus"></i>
                            <i class="fas fa-minus text-[var(--color-accent-primary)] transition-transform duration-300 icon-minus"></i>
                        </summary>
                        <div class="px-6 pb-6 text-gray-400 border-t border-[var(--color-border)] pt-4">
                            <p>Летучка делает две вещи: <strong>создаёт тесты</strong> и <strong>даёт полный контроль</strong>. Вы загружаете любой материал, и наш AI создает готовый тест за 30 секунд. Но главное — Вы получаете <strong>полный отчет по результатам в реальном времени</strong> на интерактивных дашбордах. Это личный ассистент, который не только готовит тест, но и <strong>анализирует</strong> успешность обучения за вас.</p>
                        </div>
                    </details>

                    <details class="group bg-[#1a1625] rounded-2xl border border-[var(--color-border)] transition-all duration-300 hover:border-[var(--color-accent-primary)] overflow-hidden">
                        <summary class="flex items-center justify-between p-6 cursor-pointer">
                            <span class="font-semibold text-white text-lg">Могу ли я создать тест из своих <strong>PDF, DOCX или TXT-файлов</strong>?</span>
                            <i class="fas fa-plus text-gray-500 transition-transform duration-300 icon-plus"></i>
                            <i class="fas fa-minus text-[var(--color-accent-primary)] transition-transform duration-300 icon-minus"></i>
                        </summary>
                        <div class="px-6 pb-6 text-gray-400 border-t border-[var(--color-border)] pt-4">
                            <p><strong>Да. Это ключевая функция Премиум-тарифа и основное УТП.</strong> Забудьте о ручном копировании больших документов. Вы загружаете свой учебный материал, и Летучка сама извлекает из него суть для создания релевантных вопросов. Это превращает любой статический документ в <strong>систему быстрой проверки знаний</strong>.</p>
                        </div>
                    </details>

                    <details class="group bg-[#1a1625] rounded-2xl border border-[var(--color-border)] transition-all duration-300 hover:border-[var(--color-accent-primary)] overflow-hidden">
                        <summary class="flex items-center justify-between p-6 cursor-pointer">
                            <span class="font-semibold text-white text-lg">Насколько <strong>глубокими и полезными</strong> получаются вопросы?</span>
                            <i class="fas fa-plus text-gray-500 transition-transform duration-300 icon-plus"></i>
                            <i class="fas fa-minus text-[var(--color-accent-primary)] transition-transform duration-300 icon-minus"></i>
                        </summary>
                        <div class="px-6 pb-6 text-gray-400 border-t border-[var(--color-border)] pt-4">
                            <p>Наш AI обучен понимать <strong>контекст и причинно-следственные связи</strong>, а не просто факты. Он создает вопросы, которые проверяют <strong>реальное понимание</strong> материала. Это позволяет вам оценить <strong>глубину знаний</strong>, а не поверхностную память, и <strong>диагностировать</strong> пробелы в обучении.</p>
                        </div>
                    </details>


                    <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wider pt-8">Дистрибуция и запуск тестов</h3>

                    <details class="group bg-[#1a1625] rounded-2xl border border-[var(--color-border)] transition-all duration-300 hover:border-[var(--color-accent-primary)] overflow-hidden">
                        <summary class="flex items-center justify-between p-6 cursor-pointer">
                            <span class="font-semibold text-white text-lg">Как происходит <strong>запуск теста</strong> и нужна ли регистрация участникам?</span>
                            <i class="fas fa-plus text-gray-500 transition-transform duration-300 icon-plus"></i>
                            <i class="fas fa-minus text-[var(--color-accent-primary)] transition-transform duration-300 icon-minus"></i>
                        </summary>
                        <div class="px-6 pb-6 text-gray-400 border-t border-[var(--color-border)] pt-4">
                            <p>Это наше главное УТП: <strong>Zero-Friction Дистрибуция</strong>. Вы просто делитесь ссылкой. Участникам нужно ввести <strong>только имя</strong> — <strong>без регистрации, паролей и скачиваний</strong>. Вы мгновенно получаете <strong>полный отчет по результатам</strong> в Вашем личном кабинете. <strong>Вы контролируете процесс, участники проходят тест без трения.</strong></p>
                        </div>
                    </details>
                    
                    <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wider pt-8">Аналитика и контроль результатов</h3>

                    <details class="group bg-[#1a1625] rounded-2xl border border-[var(--color-border)] transition-all duration-300 hover:border-[var(--color-accent-primary)] overflow-hidden">
                        <summary class="flex items-center justify-between p-6 cursor-pointer">
                            <span class="font-semibold text-white text-lg">Что именно я увижу на <strong>Дашборде</strong>?</span>
                            <i class="fas fa-plus text-gray-500 transition-transform duration-300 icon-plus"></i>
                            <i class="fas fa-minus text-[var(--color-accent-primary)] transition-transform duration-300 icon-minus"></i>
                        </summary>
                        <div class="px-6 pb-6 text-gray-400 border-t border-[var(--color-border)] pt-4">
                            <p>Вы увидите <strong>интерактивную картину</strong> успеваемости. Это не просто список баллов, это: <strong>распределение результатов</strong>, <strong>средний балл</strong>, <strong>общее количество прохождений</strong> и <strong>динамика активности</strong>. Дашборд по одному конкретному тесту доступен бесплатно.</p>
                        </div>
                    </details>

                    <details class="group bg-[#1a1625] rounded-2xl border border-[var(--color-border)] transition-all duration-300 hover:border-[var(--color-accent-primary)] overflow-hidden">
                        <summary class="flex items-center justify-between p-6 cursor-pointer">
                            <span class="font-semibold text-white text-lg">Как получить полный доступ к <strong>Истории</strong> и <strong>общим данным</strong>?</span>
                            <i class="fas fa-plus text-gray-500 transition-transform duration-300 icon-plus"></i>
                            <i class="fas fa-minus text-[var(--color-accent-primary)] transition-transform duration-300 icon-minus"></i>
                        </summary>
                        <div class="px-6 pb-6 text-gray-400 border-t border-[var(--color-border)] pt-4">
                            <p>Для профессионального использования вам нужен <strong>полный контроль</strong>. Платный абонемент открывает: <strong>1. Историю всех тестов</strong> (отслеживание прогресса в динамике) и <strong>2. Сводную аналитику</strong> по всем прохождениям. Это позволяет вам проводить <strong>глубинную диагностику знаний</strong> и видеть картину в целом.</p>
                        </div>
                    </details>

                    
                    <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wider pt-8">Тарифы и оплата</h3>
                    
                    <details class="group bg-[#1a1625] rounded-2xl border border-[var(--color-border)] transition-all duration-300 hover:border-[var(--color-accent-primary)] overflow-hidden">
                        <summary class="flex items-center justify-between p-6 cursor-pointer">
                            <span class="font-semibold text-white text-lg">Как работает оплата: это подписка с автосписанием или <strong>абонемент</strong>?</span>
                            <i class="fas fa-plus text-gray-500 transition-transform duration-300 icon-plus"></i>
                            <i class="fas fa-minus text-[var(--color-accent-primary)] transition-transform duration-300 icon-minus"></i>
                        </summary>
                        <div class="px-6 pb-6 text-gray-400 border-t border-[var(--color-border)] pt-4">
                            <p>
                                Это <strong>абонемент</strong>, а не рекуррентная подписка. Вы платите один раз за выбранный период (месяц, квартал или год) и получаете доступ ко всем Премиум-функциям. 
                                <strong>Никаких автоматических списаний с вашей карты.</strong> Когда срок действия абонемента закончится, Вы сами решаете, продлевать его или нет. Полный <strong>контроль</strong> над Вашими финансами.
                            </p>
                        </div>
                    </details>

                    <details class="group bg-[#1a1625] rounded-2xl border border-[var(--color-border)] transition-all duration-300 hover:border-[var(--color-accent-primary)] overflow-hidden">
                        <summary class="flex items-center justify-between p-6 cursor-pointer">
                            <span class="font-semibold text-white text-lg">Что я получу, если начну <strong>бесплатно</strong>?</span>
                            <i class="fas fa-plus text-gray-500 transition-transform duration-300 icon-plus"></i>
                            <i class="fas fa-minus text-[var(--color-accent-primary)] transition-transform duration-300 icon-minus"></i>
                        </summary>
                        <div class="px-6 pb-6 text-gray-400 border-t border-[var(--color-border)] pt-4">
                            <p>Наш бесплатный тариф — это <strong>полноценный тест-драйв</strong>. Вы получаете возможность создать <strong>5 тестов</strong> из любого текста. Этого достаточно, чтобы оценить <strong>качество генерации</strong>, увидеть <strong>полный Дашборд по этому тесту</strong> и понять, как много времени Вы экономите. <strong>Мы даем Вам попробовать всю ценность перед тем, как предложить оплату.</strong></p>
                        </div>
                    </details>

                </div>
            </div>
        </section>
    </main>

    <!-- ====================================================== -->
    <!--         THE NON-ANNOYING COOKIE CONSENT BANNER         -->
    <!-- ====================================================== -->
    <div id="cookie-banner" 
        class="fixed z-50 w-full p-5 rounded-t-2xl 
                sm:max-w-sm sm:rounded-2xl sm:bottom-6 sm:left-6 bottom-0 left-0
                border-t sm:border border-[var(--color-border)] 
                bg-[var(--color-surface)]/80 backdrop-blur-xl 
                shadow-2xl shadow-black/50" 
        style="display: none;">
        <div class="flex flex-col gap-3">
            <div>
                <h3 class="font-bold text-white">Немного о cookie</h3>
                <p class="mt-1 text-sm text-gray-400">
                    Мы используем их, чтобы сделать сайт лучше. Это безопасно. Подробнее — в  
                    <a href="/docs/privacy-policy/" target="_blank" rel="noopener noreferrer" class="text-[var(--color-accent-primary)] hover:underline">политике</a>.
                </p>
            </div>
            <div class="flex items-center gap-4">
                <button id="accept-cookies-btn" class="w-full bg-white/10 hover:bg-white/20 text-white px-5 py-2.5 text-sm font-bold rounded-full transition-transform hover:scale-105">
                    Понятно
                </button>
            </div>
        </div>
    </div>

    <!-- ====================================================== -->
    <!--         THE QUICK REGISTER & PAY MODAL                 -->
    <!-- ====================================================== -->
    <div id="register-modal" class="fixed inset-0 bg-black/80 z-50 hidden items-center justify-center p-4">
        <div id="modal-content" class="bg-[var(--color-surface)] w-full max-w-md p-8 rounded-3xl border border-[var(--color-border)] transform scale-95 opacity-0 transition-all duration-300 backdrop-blur-xl">
            <div class="flex justify-between items-center">
                <h3 class="text-2xl font-bold text-white">Регистрация</h3>
                <button id="close-modal-btn" class="text-gray-500 hover:text-white text-2xl">&times;</button>
            </div>
            <p class="mt-2 text-sm text-gray-400">Создайте аккаунт, чтобы перейти к оплате.</p>
            
            <form id="quick-register-form" class="mt-6 space-y-4">
                {% csrf_token %}
                <div>
                    <label for="id_email" class="text-sm font-semibold text-gray-300">Ваш Email</label>
                    <input type="email" name="email" id="id_email" required class="mt-1 w-full p-3 bg-[var(--color-bg)] border border-[var(--color-border)] rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-[var(--color-accent-primary)]">
                </div>
                <div>
                <label for="id_password1" class="text-sm font-semibold text-gray-300">Придумайте пароль</label>
                    <input type="password" name="password1" id="id_password1" required class="mt-1 w-full p-3 bg-[var(--color-bg)] border border-[var(--color-border)] rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-[var(--color-accent-primary)]">
                </div>
                <div>
                    <label for="id_password2" class="text-sm font-semibold text-gray-300">Повторите пароль</label>
                    <input type="password" name="password2" id="id_password2" required class="mt-1 w-full p-3 bg-[var(--color-bg)] border border-[var(--color-border)] rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-[var(--color-accent-primary)]">
                </div>

                <div class="pt-2">
                    <label class="flex items-start gap-3 cursor-pointer">
                        <input type="checkbox" id="terms-checkbox" class="mt-1 h-4 w-4 rounded border-gray-500 bg-gray-700 text-[var(--color-accent-primary)] focus:ring-[var(--color-accent-primary)]">
                        <span class="text-xs text-gray-400">
                            Нажимая кнопку, я принимаю условия
                            <a href="/docs/public-offer" target="_blank" class="text-[var(--color-accent-primary)] hover:underline">Публичной оферты</a>
                            и даю согласие на обработку персональных данных в соответствии с
                            <a href="/docs/privacy-policy" target="_blank" class="text-[var(--color-accent-primary)] hover:underline">Политикой конфиденциальности</a>.
                        </span>
                    </label>
                </div>
                
                <p id="form-error" class="text-red-500 text-sm hidden"></p>
                
                <button type="submit" id="submit-register-btn" disabled class="w-full py-3 font-bold text-center rounded-full bg-[var(--color-accent-primary)] text-white transition-opacity duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
                    Создать и оплатить
                </button>
            </form>
        </div>
    </div>

    <!-- ====================================================== -->
    <!--         МОДАЛКА АПГРЕЙДА ДО ПРЕМИУМА                 -->
    <!-- ====================================================== -->
    <div id="premium-upsell-modal" class="fixed inset-0 bg-black/80 z-50 hidden items-center justify-center p-4">
        <div id="premium-modal-content" class="bg-gradient-to-br from-[var(--color-surface)] to-[#111827] w-full max-w-md p-8 rounded-3xl border border-[var(--color-border)] 
                                            transform scale-95 opacity-0 transition-all duration-300 backdrop-blur-xl">
            
            <div class="text-center">
                <!-- Иконка короны -->
                <div class="mx-auto w-16 h-16 rounded-full bg-yellow-400/10 border-2 border-yellow-400/30 flex items-center justify-center mb-4">
                    <i class="fas fa-crown text-3xl text-yellow-400"></i>
                </div>

                <h3 class="text-2xl font-bold text-white">Это функция для <span class="text-yellow-400">Премиум</span>-пользователей</h3>
                <p class="mt-2 text-gray-400">
                    Загружайте файлы PDF и DOCX, создавайте до 20 тестов в день и получите доступ к полной аналитике, чтобы экономить часы своей работы.
                </p>
            </div>
            
            <div class="mt-8 space-y-3">
                <!-- Кнопка "Открыть Премиум" -->
                <button data-trigger-modal="register" class="w-full py-3 font-bold text-center rounded-full bg-[var(--color-accent-primary)] text-white 
                                                            transition-transform hover:scale-105 active:scale-100 shadow-lg shadow-[var(--color-accent-primary)]/30">
                    Открыть Премиум
                </button>
                
                <!-- Кнопка "Закрыть" -->
                <button id="close-premium-modal-btn" class="w-full text-sm text-gray-500 hover:text-white transition-colors py-2">
                    Может, позже
                </button>
            </div>
        </div>
    </div>

    <footer class="mt-24 border-t border-[var(--color-border)]">
        <div class="max-w-6xl mx-auto px-4 sm:px-8 py-16">
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-12">
                
                <div class="sm:col-span-2 md:col-span-1">
                    <a href="/">
                        <img src="{% static 'img/logo-header.webp' %}" alt="Летучка Логотип" class="w-40 h-auto">
                    </a>
                    <p class="mt-4 text-sm text-[var(--color-text-secondary)]">
                        AI-сервис для создания тестов и&nbsp;тестирования
                    </p>
                </div>

                <div>
                    <h3 class="text-sm font-semibold text-white uppercase tracking-wider">Продукт</h3>
                    <div class="mt-4 flex flex-col space-y-3 text-sm">
                        <a href="#transformation" class="text-[var(--color-text-secondary)] hover:text-white transition-colors">Возможности</a>
                        <a href="#security-and-payments" class="text-[var(--color-text-secondary)] hover:text-white transition-colors">Безопасность</a>
                        <a href="#pricing" class="text-[var(--color-text-secondary)] hover:text-white transition-colors">Тарифы</a>
                        <a href="#faq" class="text-[var(--color-text-secondary)] hover:text-white transition-colors">FAQ</a>
                        <a href="/dlya-prepodavateley/" target="_blank" rel="noopener noreferrer" class="text-[var(--color-text-secondary)] hover:text-white transition-colors">Преподавателям</a>
                        
                    </div>
                </div>

                <div>
                    <h3 class="text-sm font-semibold text-white uppercase tracking-wider">Медиа</h3>
                    <div class="mt-4 flex flex-col space-y-3 text-sm">
                        <a href="https://letychka.ru/media/main/" class="text-[var(--color-text-secondary)] hover:text-white transition-colors">Блог</a>
                        <a href="https://productradar.ru/product/letuchka/" target="_blank" rel="noopener noreferrer" class="text-[var(--color-text-secondary)] hover:text-white transition-colors">Product Radar</a>
                        <a href="https://www.behance.net/gallery/217116137/Letychka-letuchka-AI-servis-dlja-generacii-testov/" target="_blank" rel="noopener noreferrer" class="text-[var(--color-text-secondary)] hover:text-white transition-colors">Кейс на Behance</a>
                        <a href="https://rutube.ru/video/05833232f69b6dd32e4ccd0e9ec63c4b/?r=wd" target="_blank" rel="noopener noreferrer" class="text-[var(--color-text-secondary)] hover:text-white transition-colors">Промо на Rutube</a>
                        <a href="https://www.uchportal.ru/" target="_blank"><img border="0" src="https://www.uchportal.ru/banners/baner3.gif" width="200" height="100" alt="Учительский портал " class="text-[var(--color-text-secondary)] hover:text-white transition-colors">Учительский портал</a>
                    </div>
                </div>

                <div>
                    <h3 class="text-sm font-semibold text-white uppercase tracking-wider">Компания</h3>
                    <div class="mt-4 flex flex-col space-y-3 text-sm">
                        <a href="mailto:support@letychka.ru" class="text-[var(--color-text-secondary)] hover:text-white transition-colors">support@letychka.ru</a>
                        <a href="/docs/public-offer/" class="text-[var(--color-text-secondary)] hover:text-white transition-colors">Публичная оферта</a>
                        <a href="/docs/privacy-policy/" class="text-[var(--color-text-secondary)] hover:text-white transition-colors">Политика конфиденциальности</a>
                        <hr>
                        <a href="https://golosok.space/" class="text-[var(--color-text-secondary)] hover:text-white transition-colors" target="_blank" rel="noopener noreferrer">Голосок</a>
                        <a href="https://taxi-watcher.ru/" class="text-[var(--color-text-secondary)] hover:text-white transition-colors" target="_blank" rel="noopener noreferrer">Taxi Watcher</a>
                    </div>
                </div>
            </div>

            <div class="mt-16 pt-8 border-t border-[var(--color-border)] flex flex-col sm:flex-row justify-between items-center text-sm text-[var(--color-text-secondary)]">
                <p>2024-2025 Летучка AI. Design & Development <a href="https://dprofile.ru/case/106507/letucka-ai-servis-dlia-generacii-testov/" target="_blank" rel="noopener noreferrer" class="text-[var(--color-text-secondary)] hover:text-white transition-colors">by Kozak</a></p>
                <div class="flex items-center space-x-6 text-xl mt-4 sm:mt-0">
                    <a href="https://t.me/LetychkaRobot" target="_blank" rel="noopener noreferrer" class="hover:text-white transition-colors" title="Telegram">
                        <i class="fab fa-telegram"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Оверлей загрузки -->
    <div id="loadingOverlay" class="fixed inset-0 bg-black/80 z-50 hidden items-center justify-center flex-col">
        <div class="w-16 h-16 border-4 border-t-[var(--color-accent-primary)] border-transparent rounded-full animate-spin"></div>
        <p id="loading-hint" class="mt-4 text-white">Генерация может занять до 30 секунд...</p>
    </div>
    
    <!-- Контейнер для всплывающих уведомлений -->
    <div id="glass-alert" role="alert" hidden>
        <p class="glass-alert__message"></p>
        <button class="glass-alert__close" aria-label="Закрыть">×</button>
    </div>

    <script>
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        $(document).ready(function() {
            const openModalBtn = $('#open-register-modal-btn');
            const modal = $('#register-modal');
            const closeModalBtn = $('#close-modal-btn');
            const modalContent = $('#modal-content');
            const form = $('#quick-register-form');
            const errorDisplay = $('#form-error');

            const termsCheckbox = $('#terms-checkbox');
            const submitBtn = $('#submit-register-btn');

            termsCheckbox.on('change', function() {
                submitBtn.prop('disabled', !this.checked);
            });

            const cookieBanner = $('#cookie-banner');
            const acceptCookiesBtn = $('#accept-cookies-btn');

            if (!localStorage.getItem('cookies_accepted')) {
                cookieBanner.css({ 
                    'display': 'block',
                    'transform': 'translateY(20px)',
                    'opacity': '0',
                    'transition': 'transform 0.4s ease, opacity 0.4s ease'
                });
                setTimeout(() => {
                    cookieBanner.css({
                        'transform': 'translateY(0)',
                        'opacity': '1'
                    });
                }, 100);
            }

            acceptCookiesBtn.on('click', function() {
                localStorage.setItem('cookies_accepted', 'true');
                
                cookieBanner.css({
                    'transform': 'translateY(20px)',
                    'opacity': '0'
                });
                setTimeout(() => {
                    cookieBanner.hide();
                }, 400);
            });

            const isUserAuthenticated = "{{ username }}" !== "0" && "{{ username }}" !== "";

            const openModal = () => {
                modal.removeClass('hidden').addClass('flex');
                setTimeout(() => {
                    modalContent.removeClass('scale-95 opacity-0').addClass('scale-100 opacity-100');
                }, 10);
            };

            const closeModal = () => {
                modalContent.addClass('scale-95 opacity-0').removeClass('scale-100 opacity-100');
                setTimeout(() => {
                    modal.addClass('hidden').removeClass('flex');
                }, 300);
            };

            openModalBtn.on('click', function() {
                if (isUserAuthenticated) {
                    window.location.href = '/payment';
                } else {
                    openModal();
                }
            });

            closeModalBtn.on('click', closeModal);
            modal.on('click', function(e) {
                if (e.target === this) {
                    closeModal();
                }
            });

            $('button[data-trigger-modal="register"]').on('click', function() {
                if (isUserAuthenticated) {
                    window.location.href = '/payment';
                } else {
                    openModal();
                }
            });

            $('#quick-register-form').on('submit', function(event) {
                event.preventDefault();
                const form = $(this);
                const errorDisplay = $('#form-error');
                errorDisplay.hide().text('');

                const submitBtn = $('#submit-register-btn');
                const originalBtnText = submitBtn.text();
                const loadingBtnText = 'Ожидайте...';
                
                const csrftoken = getCookie('csrftoken');

                $.ajax({
                    type: 'POST',
                    url: '/api/quick-register/',
                    headers: {
                        'X-CSRFToken': csrftoken
                    },
                    data: form.serialize(),
                    
                    beforeSend: function() {
                        submitBtn.prop('disabled', true);
                        submitBtn.html(`
                            <span class="flex items-center justify-center">
                                <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>
                                <span>${loadingBtnText}</span>
                            </span>
                        `);
                    },
                    success: function(response) {
                        if (response.redirect) {
                            window.location.href = response.redirect;
                        }
                    },
                    error: function(xhr) {
                        let errorMessage = 'Произошла ошибка. Попробуйте снова.';
                        if (xhr.responseJSON && xhr.responseJSON.error) {
                            errorMessage = xhr.responseJSON.error;
                        }
                        errorDisplay.text(errorMessage).show();
                    },
                    complete: function() {
                        submitBtn.prop('disabled', false); 
                        submitBtn.text(originalBtnText);
                    }
                });
            });


            $('#registration-form').on('submit', function(event) {
                event.preventDefault();
                $('#alertContainer').html('').hide();
            });

        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const textInput = document.getElementById('text-input');
            const charCount = document.getElementById('char-count');
            const questionSlider = document.getElementById('question-slider');
            const questionCountDisplay = document.getElementById('question-count-display');
            const generateBtn = document.getElementById('generate-btn');
            const loadingOverlay = document.getElementById('loadingOverlay');
            const resultContainer = document.getElementById('result-container');
            const testGrid = document.getElementById('test-grid');

            // --- КЛАСС ДЛЯ УВЕДОМЛЕНИЙ ---
            class GlassAlert {
                constructor() {
                    this.alert = document.getElementById('glass-alert');
                    this.messageEl = this.alert.querySelector('.glass-alert__message');
                    this.closeBtn = this.alert.querySelector('.glass-alert__close');
                    this.closeBtn.addEventListener('click', () => this.hide());
                    this.hideTimeout = null;
                }
                show(message, duration = 4000) {
                    clearTimeout(this.hideTimeout);
                    this.messageEl.textContent = message;
                    this.alert.hidden = false;
                    this.alert.classList.add('visible');
                    if (duration) {
                        this.hideTimeout = setTimeout(() => this.hide(), duration);
                    }
                }
                hide() {
                    this.alert.classList.remove('visible');
                    this.alert.addEventListener('transitionend', () => {
                        if (!this.alert.classList.contains('visible')) this.alert.hidden = true;
                    }, { once: true });
                }
            }
            const glassAlert = new GlassAlert();

            // --- ОБРАБОТЧИКИ СОБЫТИЙ ---
            textInput.addEventListener('input', () => {
                charCount.textContent = textInput.value.length;
            });

            questionSlider.addEventListener('input', () => {
                questionCountDisplay.textContent = questionSlider.value;
                // Анимация для счетчика
                questionCountDisplay.style.transform = 'scale(1.25)';
                setTimeout(() => { questionCountDisplay.style.transform = 'scale(1)'; }, 200);
            });

            generateBtn.addEventListener('click', handleGeneration);

            // --- ОСНОВНАЯ ЛОГИКА ---
            async function handleGeneration() {
                const text = textInput.value.trim();
                const questions = questionSlider.value;

                if (text.length < 10) {
                    glassAlert.show('Минимальная длина текста — 10 символов.');
                    return;
                }

                toggleLoading(true);
                try {
                    const response = await fetch('/api-non-auth/create-survey/', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-CSRFToken': document.querySelector('[name="csrf-token"]').content
                        },
                        body: JSON.stringify({ text, questions })
                    });

                    const data = await response.json();
                    if (!response.ok || data.error) throw new Error(data.error || 'Ошибка сервера. Попробуйте позже.');

                    if (data.survey_id) {
                        window.location.href = `/c/${data.survey_id}/`;
                    } else {
                        throw new Error('Неверный формат ответа от сервера.');
                    }

                } catch (error) {
                    glassAlert.show(error.message);
                    toggleLoading(false);
                }
            }

            async function loadTests() {
                try {
                    const response = await fetch('/api/get-demo-tests/');
                    if (!response.ok) return;
                    const data = await response.json();
                    if (data.tests && data.tests.length > 0) {
                        renderTests(data.tests);
                    }
                } catch (error) {
                    console.error('Ошибка загрузки демо-тестов:', error);
                }
            }

            function renderTests(tests) {
                resultContainer.style.display = 'block';
                testGrid.innerHTML = '';
                tests.forEach(test => {
                    const testCard = document.createElement('div');
                    testCard.className = 'bg-[var(--color-bg)] p-4 rounded-2xl flex justify-between items-center';
                    testCard.innerHTML = `
                        <p class="font-semibold text-white truncate pr-4">${test.title || 'Тест по вашему тексту'}</p>
                        <a href="/c/${test.survey_id}/" class="flex-shrink-0 bg-[var(--color-accent-primary)] text-sm text-white px-4 py-2 font-bold rounded-full transition hover:opacity-80">
                            Открыть
                        </a>
                    `;
                    testGrid.appendChild(testCard);
                });
            }
            
            function toggleLoading(isLoading) {
                const originalText = 'Сгенерировать тест';
                loadingOverlay.style.display = isLoading ? 'flex' : 'none';
                generateBtn.disabled = isLoading;
                generateBtn.textContent = isLoading ? generateBtn.dataset.loadingText : originalText;
            }

            loadTests();
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const statsSection = document.getElementById('stats');
            if (!statsSection) return;

            const counters = statsSection.querySelectorAll('[data-target]');
            let hasAnimated = false;

            const animateCounters = () => {
                if (hasAnimated) return;
                hasAnimated = true;

                counters.forEach(counter => {
                    const target = +counter.dataset.target;
                    const originalText = counter.innerText;
                    const suffix = originalText.replace(/[0-9]/g, '');
                    
                    counter.innerText = '0' + suffix;
                    let current = 0;
                    
                    const updateCounter = () => {
                        const increment = target / 100;
                        current += increment;

                        if (current < target) {
                            counter.innerText = Math.ceil(current).toLocaleString('ru-RU') + suffix;
                            requestAnimationFrame(updateCounter);
                        } else {
                            counter.innerText = target.toLocaleString('ru-RU') + suffix;
                        }
                    };
                    
                    requestAnimationFrame(updateCounter);
                });
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        animateCounters();
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.5 });

            observer.observe(statsSection);
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const toggle = document.getElementById('choice-toggle');
            const routineCard = document.getElementById('routine-card');
            const letuchkaCard = document.getElementById('letuchka-card');
            const routineLabel = document.getElementById('routine-label');
            const letuchkaLabel = document.getElementById('letuchka-label');

            if (toggle && routineCard && letuchkaCard) {
                const updateView = () => {
                    const isLetuchka = toggle.checked;
                    routineCard.classList.toggle('hidden', isLetuchka);
                    letuchkaCard.classList.toggle('hidden', !isLetuchka);
                    routineLabel.classList.toggle('opacity-50', isLetuchka);
                    letuchkaLabel.classList.toggle('opacity-50', !isLetuchka);
                };
                toggle.addEventListener('change', updateView);
                updateView();
            }
        });
    </script>

    <script>
        const uploadTriggerBtn = $('#upload-file-trigger');
        const premiumModal = $('#premium-upsell-modal');
        const premiumModalContent = $('#premium-modal-content');
        const closePremiumModalBtn = $('#close-premium-modal-btn');

        uploadTriggerBtn.on('click', function() {
            premiumModal.removeClass('hidden').addClass('flex');
            setTimeout(() => {
                premiumModalContent.removeClass('scale-95 opacity-0').addClass('scale-100 opacity-100');
            }, 10);
        });

        const closePremiumModal = () => {
            premiumModalContent.addClass('scale-95 opacity-0').removeClass('scale-100 opacity-100');
            setTimeout(() => {
                premiumModal.addClass('hidden').removeClass('flex');
            }, 300);
        };

        closePremiumModalBtn.on('click', closePremiumModal);
        premiumModal.on('click', function(e) {
            if (e.target === this) {
                closePremiumModal();
            }
        });

        premiumModal.find('button[data-trigger-modal="register"]').on('click', function() {
            closePremiumModal();
            
            setTimeout(() => {
                const isUserAuthenticated = "{{ username }}" !== "0" && "{{ username }}" !== "";
                if (isUserAuthenticated) {
                    window.location.href = '/payment';
                } else {
                    openModal(); 
                }
            }, 310);
        });

    </script>

    <script src="{% static 'js/head-landing.js' %}"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const animatedTextSpan = document.getElementById('animated-headline-text');
            const cursorSpan = document.getElementById('animated-headline-cursor');
            if (!animatedTextSpan || !cursorSpan) return;

            const themes = [
                { text: "конспекту лекции истории Средних веков ", gradient: "linear-gradient(45deg, #f06195, #ee4a7b)" },
                { text: "статье о принципах SOLID ", gradient: "linear-gradient(45deg, #79EF66, #38ef7d)" },
                { text: "параграфу из учебника по биологии ", gradient: "linear-gradient(45deg, #00c6ff, #0072ff)" },
                { text: "правилам техники безопасности ", gradient: "linear-gradient(45deg, #fceabb, #f8b500)" },
                { text: "главе из книги по маркетингу ", gradient: "linear-gradient(45deg, #616DF0, #a98eff)" }
            ];

            let themeIndex = 0;
            let letterIndex = 0;
            let isDeleting = false;

            const typewriter = () => {
                const currentTheme = themes[themeIndex];
                let displayText = '';

                animatedTextSpan.style.background = currentTheme.gradient;
                animatedTextSpan.style.webkitBackgroundClip = 'text';
                animatedTextSpan.style.backgroundClip = 'text';
                
                if (isDeleting) {
                    displayText = currentTheme.text.substring(0, letterIndex--);
                } else {
                    displayText = currentTheme.text.substring(0, letterIndex++);
                }
                
                animatedTextSpan.textContent = displayText;

                let typeSpeed = isDeleting ? 40 : 90;

                if (!isDeleting && letterIndex === currentTheme.text.length) {
                    typeSpeed = 2500;
                    isDeleting = true;
                } else if (isDeleting && letterIndex === 0) {
                    isDeleting = false;
                    themeIndex = (themeIndex + 1) % themes.length;
                    typeSpeed = 600;
                }

                setTimeout(typewriter, typeSpeed);
            };

            typewriter();
        });
    </script>

</body>
</html>